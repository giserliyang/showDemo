define(["./buildModuleUrl-d920237a","./BoxGeometry-6ec9e668","./Cartographic-1d953166","./Color-2b4500b6","./CylinderGeometry-7670d7a2","./when-d186add7","./EllipsoidGeometry-a9a36c08","./IndexDatatype-61ffec74","./FeatureDetection-4281d393","./createTaskProcessorWorker","./Check-2514d21d","./Rectangle-f841217d","./Math-7f5f2992","./Event-50568704","./RuntimeError-4a74cd1a","./arrayFill-deb10550","./ComponentDatatype-07894a2b","./WebGLConstants-8d1e45f7","./GeometryAttribute-95780fd1","./Cartesian2-2b41fabe","./Cartesian4-3408960c","./GeometryAttributes-9c67dd14","./GeometryOffsetAttribute-da5a1d35","./VertexFormat-769ac289","./CylinderGeometryLibrary-a63776ca"],(function(e,t,n,r,a,i,o,d,s,c,l,f,u,h,b,y,p,v,g,m,x,I,k,w,A){"use strict";function B(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}var O=new n.t,C=s.y.packedLength+n.t.packedLength,L=s.y.packedLength+2,E=s.y.packedLength+n.t.packedLength,U=n.t.packedLength+1,M={modelMatrix:new s.y,boundingVolume:new e.i};function F(e,t){var r=t*C,a=n.t.unpack(e,r,O);r+=n.t.packedLength;var i=s.y.unpack(e,r,M.modelMatrix);s.y.multiplyByScale(i,a,i);var o=M.boundingVolume;return n.t.clone(n.t.ZERO,o.center),o.radius=Math.sqrt(3),M}function V(e,t){var r=t*L,a=e[r++],i=e[r++],o=n.t.fromElements(a,a,i,O),d=s.y.unpack(e,r,M.modelMatrix);s.y.multiplyByScale(d,o,d);var c=M.boundingVolume;return n.t.clone(n.t.ZERO,c.center),c.radius=Math.sqrt(2),M}function G(e,t){var r=t*E,a=n.t.unpack(e,r,O);r+=n.t.packedLength;var i=s.y.unpack(e,r,M.modelMatrix);s.y.multiplyByScale(i,a,i);var o=M.boundingVolume;return n.t.clone(n.t.ZERO,o.center),o.radius=1,M}function R(e,t){var r=t*U,a=e[r++],i=n.t.unpack(e,r,O),o=s.y.fromTranslation(i,M.modelMatrix);s.y.multiplyByUniformScale(o,a,o);var d=M.boundingVolume;return n.t.clone(n.t.ZERO,d.center),d.radius=1,M}var T=new n.t;function S(t,a,o,d,c){if(i.e(a)){for(var l=o.length,f=d.attributes.position.values,u=d.indices,h=t.positions,b=t.vertexBatchIds,y=t.indices,p=t.batchIds,v=t.batchTableColors,g=t.batchedIndices,m=t.indexOffsets,x=t.indexCounts,I=t.boundingVolumes,k=t.modelMatrix,w=t.center,A=t.positionOffset,O=t.batchIdIndex,C=t.indexOffset,L=t.batchedIndicesOffset,E=0;E<l;++E){var U=c(a,E),M=U.modelMatrix;s.y.multiply(k,M,M);for(var F=o[E],V=f.length,G=0;G<V;G+=3){var R=n.t.unpack(f,G,T);s.y.multiplyByPoint(M,R,R),n.t.subtract(R,w,R),n.t.pack(R,h,3*A+G),b[O++]=F}for(var S=u.length,D=0;D<S;++D)y[C+D]=u[D]+A;var Z=E+L;g[Z]=new B({offset:C,count:S,color:r.e.fromRgba(v[F]),batchIds:[F]}),p[Z]=F,m[Z]=C,x[Z]=S,I[Z]=e.i.transform(U.boundingVolume,M),A+=V/3,C+=S}t.positionOffset=A,t.batchIdIndex=O,t.indexOffset=C,t.batchedIndicesOffset+=l}}var D=new n.t,Z=new s.y;function P(t,n,a){var i=a.length,o=2+i*e.i.packedLength+1+function(e){for(var t=e.length,n=0,a=0;a<t;++a)n+=r.e.packedLength+3+e[a].batchIds.length;return n}(n),d=new Float64Array(o),s=0;d[s++]=t,d[s++]=i;for(var c=0;c<i;++c)e.i.pack(a[c],d,s),s+=e.i.packedLength;var l=n.length;d[s++]=l;for(var f=0;f<l;++f){var u=n[f];r.e.pack(u.color,d,s),s+=r.e.packedLength,d[s++]=u.offset,d[s++]=u.count;var h=u.batchIds,b=h.length;d[s++]=b;for(var y=0;y<b;++y)d[s++]=h[y]}return d}return c((function(e,r){var c=i.e(e.boxes)?new Float32Array(e.boxes):void 0,l=i.e(e.boxBatchIds)?new Uint16Array(e.boxBatchIds):void 0,f=i.e(e.cylinders)?new Float32Array(e.cylinders):void 0,u=i.e(e.cylinderBatchIds)?new Uint16Array(e.cylinderBatchIds):void 0,h=i.e(e.ellipsoids)?new Float32Array(e.ellipsoids):void 0,b=i.e(e.ellipsoidBatchIds)?new Uint16Array(e.ellipsoidBatchIds):void 0,y=i.e(e.spheres)?new Float32Array(e.spheres):void 0,p=i.e(e.sphereBatchIds)?new Uint16Array(e.sphereBatchIds):void 0,v=i.e(c)?l.length:0,g=i.e(f)?u.length:0,m=i.e(h)?b.length:0,x=i.e(y)?p.length:0,I=t.O.getUnitBox(),k=a.l.getUnitCylinder(),w=o.b.getUnitEllipsoid(),A=I.attributes.position.values,B=k.attributes.position.values,O=w.attributes.position.values,C=A.length*v;C+=B.length*g,C+=O.length*(m+x);var L=I.indices,E=k.indices,U=w.indices,M=L.length*v;M+=E.length*g,M+=U.length*(m+x);var T=new Float32Array(C),q=new Uint16Array(C/3),W=d.IndexDatatype.createTypedArray(C/3,M),_=v+g+m+x,N=new Uint16Array(_),Y=new Array(_),j=new Uint32Array(_),z=new Uint32Array(_),H=new Array(_);!function(e){var t=new Float64Array(e),r=0;n.t.unpack(t,r,D),r+=n.t.packedLength,s.y.unpack(t,r,Z)}(e.packedBuffer);var J={batchTableColors:new Uint32Array(e.batchTableColors),positions:T,vertexBatchIds:q,indices:W,batchIds:N,batchedIndices:Y,indexOffsets:j,indexCounts:z,boundingVolumes:H,positionOffset:0,batchIdIndex:0,indexOffset:0,batchedIndicesOffset:0,modelMatrix:Z,center:D};S(J,c,l,I,F),S(J,f,u,k,V),S(J,h,b,w,G),S(J,y,p,w,R);var K=P(W.BYTES_PER_ELEMENT,Y,H);return r.push(T.buffer,q.buffer,W.buffer),r.push(N.buffer,j.buffer,z.buffer),r.push(K.buffer),{positions:T.buffer,vertexBatchIds:q.buffer,indices:W.buffer,indexOffsets:j.buffer,indexCounts:z.buffer,batchIds:N.buffer,packedBuffer:K.buffer}}))}));
