define(["./arrayFill-deb10550","./arrayRemoveDuplicates-74caa2f4","./buildModuleUrl-d920237a","./Cartographic-1d953166","./Check-2514d21d","./ComponentDatatype-07894a2b","./PolylineVolumeGeometryLibrary-33dc94e9","./CorridorGeometryLibrary-66b90766","./when-d186add7","./Rectangle-f841217d","./GeometryAttribute-95780fd1","./GeometryAttributes-9c67dd14","./GeometryOffsetAttribute-da5a1d35","./IndexDatatype-61ffec74","./Math-7f5f2992","./PolygonPipeline-6809c3ce","./FeatureDetection-4281d393","./Event-50568704","./RuntimeError-4a74cd1a","./WebGLConstants-8d1e45f7","./Cartesian2-2b41fabe","./Cartesian4-3408960c","./EllipsoidTangentPlane-e12285fe","./IntersectionTests-300d4352","./Plane-d9914d3c","./PolylinePipeline-cea0bf86","./EllipsoidGeodesic-fc4b25bd","./EllipsoidRhumbLine-394d2834"],(function(t,e,i,r,o,n,a,s,d,l,u,p,h,f,c,g,y,b,v,A,_,m,E,w,T,D,P,G){"use strict";var k=new r.t,L=new r.t,O=new r.t;function x(t,e){var i,o,l,h=[],c=t.positions,g=t.corners,y=t.endPositions,b=new p.a,v=0,A=0,_=0;for(o=0;o<c.length;o+=2)v+=l=c[o].length-3,_+=l/3*4,A+=c[o+1].length-3;for(v+=3,A+=3,o=0;o<g.length;o++){i=g[o];var m=g[o].leftPositions;d.e(m)?(v+=l=m.length,_+=l/3*2):(A+=l=g[o].rightPositions.length,_+=l/3*2)}var E,w=d.e(y);w&&(v+=E=y[0].length-3,A+=E,_+=4*(E/=3));var T,D,P,G,x,N,H=v+A,I=new Float64Array(H),C=0,S=H-1,R=E/2,U=f.IndexDatatype.createTypedArray(H/3,_+4),M=0;if(U[M++]=C/3,U[M++]=(S-2)/3,w){h.push(C/3),N=k,x=L;var B=y[0];for(o=0;o<R;o++)N=r.t.fromArray(B,3*(R-1-o),N),x=r.t.fromArray(B,3*(R+o),x),s.b.addAttribute(I,x,C),s.b.addAttribute(I,N,void 0,S),G=(D=C/3)+1,P=(T=(S-2)/3)-1,U[M++]=T,U[M++]=P,U[M++]=D,U[M++]=G,C+=3,S-=3}var F=0,j=c[F++],V=c[F++];for(I.set(j,C),I.set(V,S-V.length+1),l=V.length-3,h.push(C/3,(S-2)/3),o=0;o<l;o+=3)G=(D=C/3)+1,P=(T=(S-2)/3)-1,U[M++]=T,U[M++]=P,U[M++]=D,U[M++]=G,C+=3,S-=3;for(o=0;o<g.length;o++){var z,Y,q=(i=g[o]).leftPositions,W=i.rightPositions,J=O;if(d.e(q)){for(S-=3,Y=P,h.push(G),z=0;z<q.length/3;z++)J=r.t.fromArray(q,3*z,J),U[M++]=Y-z-1,U[M++]=Y-z,s.b.addAttribute(I,J,void 0,S),S-=3;h.push(Y-Math.floor(q.length/6)),e===a.S.BEVELED&&h.push((S-2)/3+1),C+=3}else{for(C+=3,Y=G,h.push(P),z=0;z<W.length/3;z++)J=r.t.fromArray(W,3*z,J),U[M++]=Y+z,U[M++]=Y+z+1,s.b.addAttribute(I,J,C),C+=3;h.push(Y+Math.floor(W.length/6)),e===a.S.BEVELED&&h.push(C/3-1),S-=3}for(j=c[F++],V=c[F++],j.splice(0,3),V.splice(V.length-3,3),I.set(j,C),I.set(V,S-V.length+1),l=V.length-3,z=0;z<V.length;z+=3)D=(G=C/3)-1,T=(P=(S-2)/3)+1,U[M++]=T,U[M++]=P,U[M++]=D,U[M++]=G,C+=3,S-=3;C-=3,S+=3,h.push(C/3,(S-2)/3)}if(w){C+=3,S-=3,N=k,x=L;var K=y[1];for(o=0;o<R;o++)N=r.t.fromArray(K,3*(E-o-1),N),x=r.t.fromArray(K,3*o,x),s.b.addAttribute(I,N,void 0,S),s.b.addAttribute(I,x,C),D=(G=C/3)-1,T=(P=(S-2)/3)+1,U[M++]=T,U[M++]=P,U[M++]=D,U[M++]=G,C+=3,S-=3;h.push(C/3)}else h.push(C/3,(S-2)/3);return U[M++]=C/3,U[M++]=(S-2)/3,b.position=new u.o({componentDatatype:n.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:I}),{attributes:b,indices:U,wallIndices:h}}function N(t){var e=(t=d.u(t,d.u.EMPTY_OBJECT)).positions,i=t.width;o.o.typeOf.object("options.positions",e),o.o.typeOf.number("options.width",i);var n=d.u(t.height,0),s=d.u(t.extrudedHeight,n);this._positions=e,this._ellipsoid=l.t.clone(d.u(t.ellipsoid,l.t.WGS84)),this._width=i,this._height=Math.max(n,s),this._extrudedHeight=Math.min(n,s),this._cornerType=d.u(t.cornerType,a.S.ROUNDED),this._granularity=d.u(t.granularity,c.e.RADIANS_PER_DEGREE),this._offsetAttribute=t.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+e.length*r.t.packedLength+l.t.packedLength+6}N.pack=function(t,e,i){o.o.typeOf.object("value",t),o.o.typeOf.object("array",e),i=d.u(i,0);var n=t._positions,a=n.length;e[i++]=a;for(var s=0;s<a;++s,i+=r.t.packedLength)r.t.pack(n[s],e,i);return l.t.pack(t._ellipsoid,e,i),i+=l.t.packedLength,e[i++]=t._width,e[i++]=t._height,e[i++]=t._extrudedHeight,e[i++]=t._cornerType,e[i++]=t._granularity,e[i]=d.u(t._offsetAttribute,-1),e};var H=l.t.clone(l.t.UNIT_SPHERE),I={positions:void 0,ellipsoid:H,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};return N.unpack=function(t,e,i){o.o.typeOf.object("array",t),e=d.u(e,0);for(var n=t[e++],a=new Array(n),s=0;s<n;++s,e+=r.t.packedLength)a[s]=r.t.unpack(t,e);var u=l.t.unpack(t,e,H);e+=l.t.packedLength;var p=t[e++],h=t[e++],f=t[e++],c=t[e++],g=t[e++],y=t[e];return d.e(i)?(i._positions=a,i._ellipsoid=l.t.clone(u,i._ellipsoid),i._width=p,i._height=h,i._extrudedHeight=f,i._cornerType=c,i._granularity=g,i._offsetAttribute=-1===y?void 0:y,i):(I.positions=a,I.width=p,I.height=h,I.extrudedHeight=f,I.cornerType=c,I.granularity=g,I.offsetAttribute=-1===y?void 0:y,new N(I))},N.createGeometry=function(o){var a=o._positions,l=o._width,p=o._ellipsoid;a=function(t,e){for(var i=0;i<t.length;i++)t[i]=e.scaleToGeodeticSurface(t[i],t[i]);return t}(a,p);var b=e.D(a,r.t.equalsEpsilon);if(!(b.length<2||l<=0)){var v,A=o._height,_=o._extrudedHeight,m=!c.e.equalsEpsilon(A,_,0,c.e.EPSILON2),E={ellipsoid:p,positions:b,width:l,cornerType:o._cornerType,granularity:o._granularity,saveAttributes:!1};if(m)E.height=A,E.extrudedHeight=_,E.offsetAttribute=o._offsetAttribute,v=function(e){var i=e.ellipsoid,r=x(s.b.computePositions(e),e.cornerType),o=r.wallIndices,a=e.height,l=e.extrudedHeight,p=r.attributes,c=r.indices,y=p.position.values,b=y.length,v=new Float64Array(b);v.set(y);var A=new Float64Array(2*b);if(y=g.A.scaleToGeodeticHeight(y,a,i),v=g.A.scaleToGeodeticHeight(v,l,i),A.set(y),A.set(v,b),p.position.values=A,b/=3,d.e(e.offsetAttribute)){var _=new Uint8Array(2*b);if(e.offsetAttribute===h.z.TOP)_=t.d(_,1,0,b);else{var m=e.offsetAttribute===h.z.NONE?0:1;_=t.d(_,m)}p.applyOffset=new u.o({componentDatatype:n.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})}var E,w=c.length,T=f.IndexDatatype.createTypedArray(A.length/3,2*(w+o.length));T.set(c);var D,P,G=w;for(E=0;E<w;E+=2){var k=c[E],L=c[E+1];T[G++]=k+b,T[G++]=L+b}for(E=0;E<o.length;E++)P=(D=o[E])+b,T[G++]=D,T[G++]=P;return{attributes:p,indices:T}}(E);else if((v=x(s.b.computePositions(E),E.cornerType)).attributes.position.values=g.A.scaleToGeodeticHeight(v.attributes.position.values,A,p),d.e(o._offsetAttribute)){var w=v.attributes.position.values.length,T=new Uint8Array(w/3),D=o._offsetAttribute===h.z.NONE?0:1;t.d(T,D),v.attributes.applyOffset=new u.o({componentDatatype:n.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:T})}var P=v.attributes,G=i.i.fromVertices(P.position.values,void 0,3);return new u.I({attributes:P,indices:v.indices,primitiveType:y._0x12cc5d.LINES,boundingSphere:G,offsetAttribute:o._offsetAttribute})}},function(t,e){return d.e(e)&&(t=N.unpack(t,e)),t._ellipsoid=l.t.clone(t._ellipsoid),N.createGeometry(t)}}));
