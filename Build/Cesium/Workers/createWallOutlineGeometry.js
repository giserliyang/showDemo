define(["./when-d186add7","./Rectangle-f841217d","./buildModuleUrl-d920237a","./Cartographic-1d953166","./ComponentDatatype-07894a2b","./Check-2514d21d","./GeometryAttribute-95780fd1","./GeometryAttributes-9c67dd14","./IndexDatatype-61ffec74","./Math-7f5f2992","./FeatureDetection-4281d393","./WallGeometryLibrary-9d5e9be5","./Event-50568704","./RuntimeError-4a74cd1a","./WebGLConstants-8d1e45f7","./Cartesian2-2b41fabe","./Cartesian4-3408960c","./arrayRemoveDuplicates-74caa2f4","./PolylinePipeline-cea0bf86","./EllipsoidGeodesic-fc4b25bd","./EllipsoidRhumbLine-394d2834","./IntersectionTests-300d4352","./Plane-d9914d3c"],(function(e,t,i,n,o,r,a,s,m,u,l,p,d,h,c,f,g,y,v,_,w,A,H){"use strict";var b=new n.t,x=new n.t;function E(i){var o=(i=e.u(i,e.u.EMPTY_OBJECT)).positions,a=i.maximumHeights,s=i.minimumHeights;if(!e.e(o))throw new r.t("options.positions is required.");if(e.e(a)&&a.length!==o.length)throw new r.t("options.positions and options.maximumHeights must have the same length.");if(e.e(s)&&s.length!==o.length)throw new r.t("options.positions and options.minimumHeights must have the same length.");var m=e.u(i.granularity,u.e.RADIANS_PER_DEGREE),l=e.u(i.ellipsoid,t.t.WGS84);this._positions=o,this._minimumHeights=s,this._maximumHeights=a,this._granularity=m,this._ellipsoid=t.t.clone(l),this._workerName="createWallOutlineGeometry",this._outlineWidth=e.u(i.outlineWidth,1);var p=1+o.length*n.t.packedLength+2;e.e(s)&&(p+=s.length),e.e(a)&&(p+=a.length),this.packedLength=p+t.t.packedLength+2}E.pack=function(i,o,a){if(!e.e(i))throw new r.t("value is required");if(!e.e(o))throw new r.t("array is required");a=e.u(a,0);var s,m=i._positions,u=m.length;for(o[a++]=u,s=0;s<u;++s,a+=n.t.packedLength)n.t.pack(m[s],o,a);var l=i._minimumHeights;if(u=e.e(l)?l.length:0,o[a++]=u,e.e(l))for(s=0;s<u;++s)o[a++]=l[s];var p=i._maximumHeights;if(u=e.e(p)?p.length:0,o[a++]=u,e.e(p))for(s=0;s<u;++s)o[a++]=p[s];return t.t.pack(i._ellipsoid,o,a),a+=t.t.packedLength,o[a++]=i._granularity,o[a]=i._outlineWidth,o};var k=t.t.clone(t.t.UNIT_SPHERE),D={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:k,granularity:void 0,outlineWidth:void 0};return E.unpack=function(i,o,a){if(!e.e(i))throw new r.t("array is required");o=e.u(o,0);var s,m,u,l=i[o++],p=new Array(l);for(s=0;s<l;++s,o+=n.t.packedLength)p[s]=n.t.unpack(i,o);if((l=i[o++])>0)for(m=new Array(l),s=0;s<l;++s)m[s]=i[o++];if((l=i[o++])>0)for(u=new Array(l),s=0;s<l;++s)u[s]=i[o++];var d=t.t.unpack(i,o,k);o+=t.t.packedLength;var h=i[o++],c=i[o];return e.e(a)?(a._positions=p,a._minimumHeights=m,a._maximumHeights=u,a._ellipsoid=t.t.clone(d,a._ellipsoid),a._granularity=h,a._outlineWidth=c,a):(D.positions=p,D.minimumHeights=m,D.maximumHeights=u,D.granularity=h,D.outlineWidth=c,new E(D))},E.fromConstantHeights=function(t){var i=(t=e.u(t,e.u.EMPTY_OBJECT)).positions;if(!e.e(i))throw new r.t("options.positions is required.");var n,o,a=t.minimumHeight,s=t.maximumHeight,m=e.e(a),u=e.e(s);if(m||u){var l=i.length;n=m?new Array(l):void 0,o=u?new Array(l):void 0;for(var p=0;p<l;++p)m&&(n[p]=a),u&&(o[p]=s)}return new E({positions:i,maximumHeights:o,minimumHeights:n,ellipsoid:t.ellipsoid})},E.createGeometry=function(t){var r=t._positions,d=t._minimumHeights,h=t._maximumHeights,c=t._granularity,f=t._ellipsoid,g=p.D.computePositions(f,r,h,d,c,!1);if(e.e(g)){var y=g.pos.bottomPositions,v=g.pos.topPositions,_=v.length;if(t._outlineWidth>1){let e=_/3;var w=3*(2*(2*e-2)+1),A=new Float64Array(w),H=0;let t,i,o;for(_=e,t=0;t<_;++t){var E=3*t;i=n.t.fromArray(v,E,b),o=n.t.fromArray(y,E,x),0!==t&&(A[H++]=i.x,A[H++]=i.y,A[H++]=i.z),A[H++]=o.x,A[H++]=o.y,A[H++]=o.z,A[H++]=i.x,A[H++]=i.y,A[H++]=i.z}for(H-=3,t=_-2;t>=0;--t){E=3*t;o=n.t.fromArray(y,E,x),A[H++]=o.x,A[H++]=o.y,A[H++]=o.z}}else{var k;w=2*_,A=new Float64Array(w),H=0;for(_/=3,k=0;k<_;++k){E=3*k;var D=n.t.fromArray(v,E,b),L=n.t.fromArray(y,E,x);A[H++]=L.x,A[H++]=L.y,A[H++]=L.z,A[H++]=D.x,A[H++]=D.y,A[H++]=D.z}var P=new s.a({position:new a.o({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:A})})}P=new s.a({position:new a.o({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:A})});t._outlineWidth>1&&(P.sideness=new a.o({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,0,1,1,1,1,0])}),P.sideness.isInstanceAttribute=!0);var W=w/3;w=2*W-4+W;var C=m.IndexDatatype.createTypedArray(W,w),G=0;for(k=0;k<W-2;k+=2){var I=k,T=k+2,R=n.t.fromArray(A,3*I,b),O=n.t.fromArray(A,3*T,x);if(!n.t.equalsEpsilon(R,O,u.e.EPSILON10)){var S=k+1,q=k+3;C[G++]=S,C[G++]=I,C[G++]=S,C[G++]=q,C[G++]=I,C[G++]=T}}return C[G++]=W-2,C[G++]=W-1,new a.I({attributes:P,indices:C,primitiveType:t._outlineWidth>1?l._0x12cc5d.TRIANGLES:l._0x12cc5d.LINES,boundingSphere:new i.i.fromVertices(A)})}},function(i,n){return e.e(n)&&(i=E.unpack(i,n)),i._ellipsoid=t.t.clone(i._ellipsoid),E.createGeometry(i)}}));
