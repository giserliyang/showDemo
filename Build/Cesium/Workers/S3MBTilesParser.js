define(["require","./createTaskProcessorWorker","./Check-2514d21d","./when-d186add7","./FeatureDetection-4281d393","./Cartesian2-2b41fabe","./Cartographic-1d953166","./Cartesian4-3408960c","./Color-2b4500b6","./ComponentDatatype-07894a2b","./getStringFromTypedArray-d6c48557","./buildModuleUrl-d920237a","./S3MCompressType-bfc012b6","./IndexDatatype-61ffec74","./RuntimeError-4a74cd1a","./Rectangle-f841217d","./BoundingRectangle-1d700ce8","./S3MPixelFormat-8396e1c3","./pako_inflate-e5e032ee","./arrayFill-deb10550","./CompressedTextureBuffer-743ad92d","./PixelFormat-4b0141b1","./GeographicTilingScheme-27838d11","./Math-7f5f2992","./WebGLConstants-8d1e45f7","./Event-50568704","./Buffer-455831f6"],(function(t,e,r,a,n,A,B,o,E,i,C,s,y,l,u,P,f,c,d,p,T,D,L,F,g,I,M){"use strict";function v(t,e,A){if(r.o.defined("array",t),a.e(e)&&r.o.typeOf.number("begin",e),a.e(A)&&r.o.typeOf.number("end",A),"function"==typeof t.slice)return t.slice(e,A);for(var B=Array.prototype.slice.call(t,e,A),o=n.s.typedArrayTypes,E=o.length,i=0;i<E;++i)if(t instanceof o[i]){B=new o[i](B);break}return B}var m,_,S=(m=!0,function(t,e){var r=m?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return m=!1,r}),O=S(void 0,(function(){return O.toString().search("(((.+)+)+)+$").toString().constructor(O).search("(((.+)+)+)+$")}));function N(){}function R(t,e,r){var n,A=t.num_points(),B=r.num_components(),o=new _.AttributeQuantizationTransform;if(o.InitFromAttribute(r)){for(var E=new Array(B),C=0;C<B;++C)E[C]=o.min_value(C);n={quantizationBits:o.quantization_bits(),minValues:E,range:o.range(),octEncoded:!1}}_.destroy(o),(o=new _.AttributeOctahedronTransform).InitFromAttribute(r)&&(n={quantizationBits:o.quantization_bits(),octEncoded:!0}),_.destroy(o);var s,y=A*B;s=a.e(n)?function(t,e,r,a,n){var A,B;a.quantizationBits<=8?(B=new _.DracoUInt8Array,A=new Uint8Array(n),e.GetAttributeUInt8ForAllPoints(t,r,B)):(B=new _.DracoUInt16Array,A=new Uint16Array(n),e.GetAttributeUInt16ForAllPoints(t,r,B));for(var o=0;o<n;++o)A[o]=B.GetValue(o);return _.destroy(B),A}(t,e,r,n,y):function(t,e,r,a){var n,A;switch(r.data_type()){case 1:case 11:A=new _.DracoInt8Array,n=new Int8Array(a),e.GetAttributeInt8ForAllPoints(t,r,A);break;case 2:A=new _.DracoUInt8Array,n=new Uint8Array(a),e.GetAttributeUInt8ForAllPoints(t,r,A);break;case 3:A=new _.DracoInt16Array,n=new Int16Array(a),e.GetAttributeInt16ForAllPoints(t,r,A);break;case 4:A=new _.DracoUInt16Array,n=new Uint16Array(a),e.GetAttributeUInt16ForAllPoints(t,r,A);break;case 5:case 7:A=new _.DracoInt32Array,n=new Int32Array(a),e.GetAttributeInt32ForAllPoints(t,r,A);break;case 6:case 8:A=new _.DracoUInt32Array,n=new Uint32Array(a),e.GetAttributeUInt32ForAllPoints(t,r,A);break;case 9:case 10:A=new _.DracoFloat32Array,n=new Float32Array(a),e.GetAttributeFloatForAllPoints(t,r,A)}for(var B=0;B<a;++B)n[B]=A.GetValue(B);return _.destroy(A),n}(t,e,r,y);var l=i.ComponentDatatype.fromTypedArray(s);return{array:s,data:{componentsPerAttribute:B,componentDatatype:l,byteOffset:r.byte_offset(),byteStride:i.ComponentDatatype.getSizeInBytes(l)*B,normalized:r.normalized(),quantization:n}}}O();var h=new B.t(40680631590769,40680631590769,40408299984661.445),G=new B.t,b=new B.t;function x(t,e,r,n){var A=Math.cos(e);G.x=A*Math.cos(t),G.y=A*Math.sin(t),G.z=Math.sin(e),G=B.t.normalize(G,G),B.t.multiplyComponents(h,G,b);var o=Math.sqrt(B.t.dot(G,b));return b=B.t.divideByScalar(b,o,b),G=B.t.multiplyByScalar(G,r,G),a.e(n)||(n=new B.t),B.t.add(b,G,n)}var U=new n.y,K=new n.y,H=new B.t,w=new B.t$1;function V(t,e,r,E,C,s,l,u){var f=void 0,c=void 0,d=void 0,p=void 0,T=r.vertexAttributes,D=r.attrLocation;if(r.nCompressOptions=0,a.e(E.posUniqueID)&&E.posUniqueID>=0){a.e(u)||(r.nCompressOptions|=y.VertexCompressOption.SVC_Vertex);var L=e.GetAttribute(t,E.posUniqueID),F=R(t,e,L),g=F.data.componentsPerAttribute;r.verticesCount=F.array.length/g,r.vertCompressConstant=F.data.quantization.range/(1<<F.data.quantization.quantizationBits);var I=F.data.quantization.minValues;r.minVerticesValue=new o.e(I[0],I[1],I[2],1),g>3&&(r.minVerticesValue.w=I[3]);var M=r.verticesCount;if(s&&(f=new B.t$1,c=new B.t$1,d=new Float32Array(2*M),p=new Float64Array(2*M)),a.e(u)){var v=F.array,m=3===g?B.t.unpackArray(v):o.e.unpackArray(v);for(let t=0,e=m.length;t<e;t++){let e=m[t];B.t.multiplyByScalar(e,r.vertCompressConstant,e),B.t.add(e,r.minVerticesValue,e)}var _=n.y.multiply(u.sphereMatrix,u.geoMatrix,U),S=n.y.multiply(u.ellipsoidMatrix,u.geoMatrix,K);n.y.inverse(S,S);var O=new P.t(6378137,6378137,6378137);for(let t=0,e=m.length;t<e;t++){let e=m[t];n.y.multiplyByPoint(_,e,H);let r=O.cartesianToCartographic(H,w);s&&(p[2*t]=r.longitude,p[2*t+1]=r.latitude,0===t?(f.longitude=r.longitude,f.latitude=r.latitude,c.longitude=r.longitude,c.latitude=r.latitude):(f.longitude=Math.max(r.longitude,f.longitude),f.latitude=Math.max(r.latitude,f.latitude),c.longitude=Math.min(r.longitude,c.longitude),c.latitude=Math.min(r.latitude,c.latitude)));let a=x(r.longitude,r.latitude,r.height,H);n.y.multiplyByPoint(S,a,e)}var N=new Array(3*m.length);3===g?B.t.packArray(m,N):o.e.packArray(m,N),F.array=new Float32Array(N),F.data.componentDatatype=i.ComponentDatatype.FLOAT,F.data.byteStride=4*g}if(D.aPosition=T.length,T.push({index:D.aPosition,typedArray:F.array,componentsPerAttribute:g,componentDatatype:F.data.componentDatatype,offsetInBytes:F.data.byteOffset,strideInBytes:F.data.byteStride,normalize:F.data.normalized}),!a.e(u)&&s)for(var h=new B.t,G=new B.t,b=new B.t$1,V=0;V<M;V++)n.y.multiplyByPoint(C,B.t.fromElements(F.array[3*V]*r.vertCompressConstant+I[0],F.array[3*V+1]*r.vertCompressConstant+I[1],F.array[3*V+2]*r.vertCompressConstant+I[2],h),G),b=B.t$1.fromCartesian(G),p[2*V]=b.longitude,p[2*V+1]=b.latitude,0===V?(f.longitude=b.longitude,f.latitude=b.latitude,c.longitude=b.longitude,c.latitude=b.latitude):(f.longitude=Math.max(b.longitude,f.longitude),f.latitude=Math.max(b.latitude,f.latitude),c.longitude=Math.min(b.longitude,c.longitude),c.latitude=Math.min(b.latitude,c.latitude));if(s){for(V=0;V<M;V++)d[2*V]=p[2*V]-c.longitude,d[2*V+1]=p[2*V+1]-c.latitude;D.img=T.length,T.push({index:D.img,typedArray:d,componentsPerAttribute:2,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),l.max=f,l.min=c}}if(a.e(E.normalUniqueID)&&E.normalUniqueID>=0){r.nCompressOptions|=y.VertexCompressOption.SVC_Normal;var Y=e.GetAttribute(t,E.normalUniqueID),J=R(t,e,Y),k=J.data.quantization;r.normalRangeConstant=(1<<k.quantizationBits)-1,D.aNormal=T.length,T.push({index:D.aNormal,typedArray:J.array,componentsPerAttribute:J.data.componentsPerAttribute,componentDatatype:J.data.componentDatatype,offsetInBytes:J.data.byteOffset,strideInBytes:J.data.byteStride,normalize:J.data.normalized})}if(a.e(E.colorUniqueID)&&E.colorUniqueID>=0){r.nCompressOptions|=y.VertexCompressOption.SVC_VertexColor;var W=e.GetAttribute(t,E.colorUniqueID),Z=R(t,e,W),X=Z.array,Q=Z.data.componentDatatype,z=Z.data.byteOffset,j=Z.data.byteStride,q=Z.data.normalized;if(Z.array instanceof Int32Array){X=new Uint8Array(Z.array.length);for(let t=0,e=Z.array.length;t<e;t++)X[t]=Z.array[t];Q=5121,z=0,j=4,q=!0}D.aColor=T.length,T.push({index:D.aColor,typedArray:X,componentsPerAttribute:Z.data.componentsPerAttribute,componentDatatype:Q,offsetInBytes:z,strideInBytes:j,normalize:q})}for(V=0;V<E.texCoordUniqueIDs.length;V++){r.texCoordCompressConstant=[],r.minTexCoordValue=[];var $=E.texCoordUniqueIDs[V];if(!($<0)){var tt=e.GetAttribute(t,$),et=R(t,e,tt);if(a.e(et.data.quantization)){r.nCompressOptions|=y.VertexCompressOption.SVC_TexutreCoord,r.texCoordCompressConstant.push(et.data.quantization.range/(1<<et.data.quantization.quantizationBits));I=et.data.quantization.minValues;r.minTexCoordValue.push(new A.o(I[0],I[1]))}var rt="aTexCoord"+V;D[rt]=T.length,T.push({index:D[rt],typedArray:et.array,componentsPerAttribute:et.data.componentsPerAttribute,componentDatatype:et.data.componentDatatype,offsetInBytes:et.data.byteOffset,strideInBytes:et.data.byteStride,normalize:et.data.normalized}),r.textureCoordIsW=!0}}for(V=0;V<E.vertexAttrUniqueIDs.length;V++){var at=E.vertexAttrUniqueIDs[V];if(!(at<0)){var nt=e.GetAttribute(t,at),At=R(t,e,nt);D.aVertexWeight=T.length,T.push({index:D.aVertexWeight,typedArray:At.array,componentsPerAttribute:At.data.componentsPerAttribute,componentDatatype:At.data.componentDatatype,offsetInBytes:At.data.byteOffset,strideInBytes:At.data.byteStride,normalize:At.data.normalized}),r.customVertexAttribute={VertexWeight:0}}}}N.dracoDecodePointCloud=function(t,e,r,a,n){for(var A=new(_=t).Decoder,B=["POSITION","NORMAL","COLOR"],o=0;o<B.length;++o)A.SkipAttributeTransform(_[B[o]]);var E=new _.DecoderBuffer;if(E.Init(e,r),A.GetEncodedGeometryType(E)!==_.POINT_CLOUD)throw new u.t("Draco geometry type must be POINT_CLOUD.");var i=new _.PointCloud,C=A.DecodeBufferToPointCloud(E,i);if(!C.ok()||0===i.ptr)throw new u.t("Error decoding draco point cloud: "+C.error_msg());_.destroy(E),V(i,A,a,n),_.destroy(i),_.destroy(A)},N.dracoDecodeMesh=function(t,e,r,a,A,B,o,E,i,C){for(var s=new(_=t).Decoder,y=["POSITION","NORMAL","COLOR","TEX_COORD"],P=0;P<y.length;++P)s.SkipAttributeTransform(_[y[P]]);var f=new _.DecoderBuffer;if(f.Init(e,r),s.GetEncodedGeometryType(f)!==_.TRIANGULAR_MESH)throw new u.t("Unsupported draco mesh geometry type.");var c=new _.Mesh;if(!s.DecodeBufferToMesh(f,c).ok()||0===c.ptr)return!1;_.destroy(f),V(c,s,a,B,o,E,i,C);var d=function(t,e){for(var r=t.num_points(),a=t.num_faces(),n=new _.DracoInt32Array,A=3*a,B=l.IndexDatatype.createTypedArray(r,A),o=0,E=0;E<a;++E)e.GetFaceFromMesh(t,E,n),B[o+0]=n.GetValue(0),B[o+1]=n.GetValue(1),B[o+2]=n.GetValue(2),o+=3;var i=l.IndexDatatype.UNSIGNED_SHORT;return B instanceof Uint32Array&&(i=l.IndexDatatype.UNSIGNED_INT),_.destroy(n),{typedArray:B,numberOfIndices:A,indexDataType:i}}(c,s);A.indicesTypedArray=d.typedArray,A.indicesCount=d.numberOfIndices,A.indexType=d.indexDataType,A.primitiveType=n._0x12cc5d.TRIANGLES,_.destroy(c),_.destroy(s)};var Y,J=(Y=!0,function(t,e){var r=Y?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return Y=!1,r}),k=J(void 0,(function(){return k.toString().search("(((.+)+)+)+$").toString().constructor(k).search("(((.+)+)+)+$")}));k();var W,Z=Object.freeze({OSGBFile:0,OSGBCacheFile:1,ClampGroundPolygon:2,ClampObjectPolygon:3,ClampGroundLine:4,ClampObjectLine:5,IconPoint:6,Text:7,PointCloudFile:8,ExtendRegion3D:9,ExtendClampPolygonCache:10,PolylineEffect:11,RegionEffect:12,ClampGroundAndObjectLineCache:13,ClampGroundRealtimeRasterCache:14}),X=(W=!0,function(t,e){var r=W?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return W=!1,r}),Q=X(void 0,(function(){return Q.toString().search("(((.+)+)+)+$").toString().constructor(Q).search("(((.+)+)+)+$")}));function z(){}function j(t){var e=new s.i,r=t.instanceBounds;if(!a.e(r))return e;var n=new B.t(r[0],r[1],r[2]),A=new B.t(r[3],r[4],r[5]),o=B.t.lerp(n,A,.5,new B.t),E=B.t.distance(o,n);return e.center=o,e.radius=E,e}function q(t){var e,r,n=new s.i,A=new B.t,o=t.vertexAttributes[0],E=o.componentsPerAttribute,i=a.e(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,C=1;i?(C=t.vertCompressConstant,e=new B.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),r=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):r=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var l=[],u=0;u<t.verticesCount;u++)B.t.fromArray(r,E*u,A),i&&(A=B.t.multiplyByScalar(A,C,A),A=B.t.add(A,e,A)),l.push(B.t.clone(A));return s.i.fromPoints(l,n),l.length=0,n}function $(t){var e,r,n=new s.i,A=new B.t,o=a.e(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,E=t.vertexAttributes[0],i=E.componentsPerAttribute,C=1;o?(C=t.vertCompressConstant,r=new B.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/2)):e=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var l=[],u=0;u<t.verticesCount;u++)B.t.fromArray(e,i*u,A),o&&(A=B.t.multiplyByScalar(A,C,A),A=B.t.add(A,r,A)),l.push(B.t.clone(A));return s.i.fromPoints(l,n),l.length=0,n}function tt(t){var e,r,n=a.e(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,A=new s.i,E=new B.t,i=new B.t,C=t.vertexAttributes[0],l=C.componentsPerAttribute,u=t.attrLocation.aPosition,P=t.vertexAttributes[u],f=t.attrLocation.aTexCoord5,c=t.vertexAttributes[f],d=c.componentsPerAttribute;n?(l=3,d=3,e=rt(t,P),r=function(t,e,r){for(var a,n,A,B=e.componentsPerAttribute,E=t.texCoordCompressConstant[r],i=new o.e(t.minTexCoordValue[r].x,t.minTexCoordValue[r].y,t.minTexCoordValue[r].z,t.minTexCoordValue[r].w),C=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),s=new Float32Array(3*t.verticesCount),y=0;y<t.verticesCount;y++)a=C[B*y]*E+i.x,n=C[B*y+1]*E+i.y,A=C[B*y+2]*E+i.z,s[3*y]=a,s[3*y+1]=n,s[3*y+2]=A;return s}(t,c,5)):(e=new Float32Array(C.typedArray.buffer,C.typedArray.byteOffset,C.typedArray.byteLength/4),r=new Float32Array(c.typedArray.buffer,c.typedArray.byteOffset,c.typedArray.byteLength/4));for(var p=[],T=0;T<t.verticesCount;T++)B.t.fromArray(e,l*T,E),B.t.fromArray(r,d*T,i),B.t.add(E,i,E),p.push(B.t.clone(E));return s.i.fromPoints(p,A),p.length=0,A}function et(t){var e=n._0x12cc5d.TRIANGLES;switch(t){case 1:e=n._0x12cc5d.POINTS;break;case 2:e=n._0x12cc5d.LINES;break;case 3:e=n._0x12cc5d.LINE_STRIP;break;case 4:e=n._0x12cc5d.TRIANGLES}return e}function rt(t,e){for(var r,a,n,A=e.componentsPerAttribute,o=t.vertCompressConstant,E=new B.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),i=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),C=new Float32Array(3*t.verticesCount),s=0;s<t.verticesCount;s++)r=i[A*s]*o+E.x,a=i[A*s+1]*o+E.y,n=i[A*s+2]*o+E.z,C[3*s]=r,C[3*s+1]=a,C[3*s+2]=n;return C}Q(),z.calcBoundingSphereInWorker=function(t,e){return e.instanceIndex>-1?j(e):a.e(e.clampRegionEdge)?tt(e):t>=Z.ClampGroundPolygon&&t<=Z.ClampObjectLine?$(e):t==Z.ClampGroundAndObjectLineCache?tt(e):q(e)},z.calcBoundingSphere=function(t,e,r){var n,A=t._fileType;return n=e.instanceIndex>-1?j(e):a.e(e.clampRegionEdge)?tt(e):A>=Z.ClampGroundPolygon&&A<=Z.ClampObjectLine?$(e):A==Z.ClampGroundAndObjectLineCache?tt(e):q(e),s.i.transform(n,r,n),n},z.calcBoundingRectangle=function(t,e){var r;return t._fileType===Z.ClampGroundPolygon&&(r=function(t){var e,r,n=a.e(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,o=new f.f,E=t.vertexAttributes[0],i=E.componentsPerAttribute,C=1;n?(C=t.vertCompressConstant,r=new B.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/2)):e=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var s=[],l=0;l<t.verticesCount;l++){var u=e[i*l],P=e[i*l+1];n&&(u=C*u+r.x,P=C*P+r.y),s.push(new A.o(u,P))}return f.f.fromPoints(s,o),s.length=0,o}(e)),r},z.createEdge=function(t,e){if(!(e.length<1)){var r=function(t){for(var e=[],r=t.length,a=0;a<r;a++){var A=et(t[a].primitiveType);(A===n._0x12cc5d.LINES||A===n._0x12cc5d.LINE_STRIP)&&e.push(t[a])}return e}(e);if(0!=r.length){var A,o=function(t){for(var e=0,r=t.length,a=0;a<r;a++){var A=t[a],B=et(A.primitiveType);B==n._0x12cc5d.LINES?e+=A.indicesCount/2:B==n._0x12cc5d.LINE_STRIP&&e++}return e}(r),E=t.attrLocation.aPosition,C=t.vertexAttributes[E],s=a.e(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,l=C.componentsPerAttribute;s?(l=3,A=rt(t,C)):A=new Float32Array(C.typedArray.buffer,C.typedArray.byteOffset,C.typedArray.byteLength/4);for(var u=function(t){for(var e=0,r=t.length,a=0;a<r;a++)e+=t[a].indicesCount;return e}(r),P=function(t,e,r){for(var a,A=[],o=r.length,E=0;E<o;E++){var i,C=r[E];i=0===C.indexType?new Uint16Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/2):new Uint32Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/4);var s=et(C.primitiveType);if(s==n._0x12cc5d.LINES)for(a=0;a<C.indicesCount;a+=2){var y=[],l=new B.t;l.x=t[i[a]*e],l.y=t[i[a]*e+1],l.z=t[i[a]*e+2],y.push(l);var u=new B.t;u.x=t[i[a+1]*e],u.y=t[i[a+1]*e+1],u.z=t[i[a+1]*e+2],y.push(u),A.push(y)}else if(s==n._0x12cc5d.LINE_STRIP){for(y=[],a=0;a<C.indicesCount;a++){var P=new B.t;P.x=t[i[a]*e],P.y=t[i[a]*e+1],P.z=t[i[a]*e+2],y.push(P)}A.push(y)}}return A}(A,l,r),f=4*u-4*o,c=new Float32Array(3*f),d=new Float32Array(3*f),p=new Float32Array(3*f),T=new Int8Array(2*f),D=0,L=0;L<o;L++){for(var F=P[L].length,g=0;g<F;g++){var I=4*D-4*L,M=3*I+12*g,v=P[L][g];0!=g&&(c[M-6]=v.x,c[M-5]=v.y,c[M-4]=v.z,c[M-3]=v.x,c[M-2]=v.y,c[M-1]=v.z),g!=F-1&&(c[M]=v.x,c[M+1]=v.y,c[M+2]=v.z,c[M+3]=v.x,c[M+4]=v.y,c[M+5]=v.z);var m=v;g+1<F&&(m=P[L][g+1]),0!=g&&(p[M-6]=m.x,p[M-5]=m.y,p[M-4]=m.z,p[M-3]=m.x,p[M-2]=m.y,p[M-1]=m.z),g!=F-1&&(p[M]=m.x,p[M+1]=m.y,p[M+2]=m.z,p[M+3]=m.x,p[M+4]=m.y,p[M+5]=m.z);var _=v;g>=1&&(_=P[L][g-1]),0!=g&&(d[M-6]=_.x,d[M-5]=_.y,d[M-4]=_.z,d[M-3]=_.x,d[M-2]=_.y,d[M-1]=_.z),g!=F-1&&(d[M]=_.x,d[M+1]=_.y,d[M+2]=_.z,d[M+3]=_.x,d[M+4]=_.y,d[M+5]=_.z),M=2*I+8*g,0!=g&&(T[M-4]=-1,T[M-3]=-1,T[M-2]=1,T[M-1]=-1),g!=F-1&&(T[M]=-1,T[M+1]=1,T[M+2]=1,T[M+3]=1)}D+=P[L].length}var S={vertexAttributes:[],attrLocation:{}},O=S.vertexAttributes,N=S.attrLocation;S.instanceCount=0,S.instanceMode=0,N.aPosition=0,O.push({index:N.aPosition,typedArray:c,componentsPerAttribute:3,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aNormal=1,O.push({index:N.aNormal,typedArray:d,componentsPerAttribute:3,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord0=2,O.push({index:N.aTexCoord0,typedArray:p,componentsPerAttribute:3,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord1=3,O.push({index:N.aTexCoord1,typedArray:T,componentsPerAttribute:2,componentDatatype:i.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:2*Int8Array.BYTES_PER_ELEMENT,normalize:!1});for(var R=[],h=0;h<P.length;h++)R.push(P[h].length);return{vertexPackage:S,indexPackage:function(t,e,r,a){var A,B={};B.indicesCount=6*(t-e),B.indexType=a>65535?1:0,B.primitiveType=n._0x12cc5d.TRIANGLES,A=0===B.indexType?new Uint16Array(B.indicesCount):new Uint32Array(B.indicesCount);for(var o=0,E=0;E<e;E++){for(var i=0;i<r[E]-1;i++)A[6*(o-E+i)]=4*(o-E+i),A[6*(o-E+i)+1]=4*(o-E+i)+2,A[6*(o-E+i)+2]=4*(o-E+i)+1,A[6*(o-E+i)+3]=4*(o-E+i)+1,A[6*(o-E+i)+4]=4*(o-E+i)+2,A[6*(o-E+i)+5]=4*(o-E+i)+3;o+=r[E]}return B.indicesTypedArray=A,B}(u,o,R,f)}}}};var at,nt=(at=!0,function(t,e){var r=at?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return at=!1,r}),At=nt(void 0,(function(){return At.toString().search("(((.+)+)+)+$").toString().constructor(At).search("(((.+)+)+)+$")}));At();var Bt=Object.freeze({S3M:49,S3M4:1}),ot=function(){var t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var r="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";WebAssembly.validate(t)&&(r="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");var a,n=WebAssembly.instantiate(function(t){for(var r=new Uint8Array(t.length),a=0;a<t.length;++a){var n=t.charCodeAt(a);r[a]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}var A=0;for(a=0;a<t.length;++a)r[A++]=r[a]<60?e[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,A)}(r),{}).then((function(t){(a=t.instance).exports.__wasm_call_ctors()}));function A(t,e,r,n,A,B){var o=a.exports.sbrk,E=r+3&-4,i=o(E*n),C=o(A.length),s=new Uint8Array(a.exports.memory.buffer);s.set(A,C);var y=t(i,r,n,C,A.length);if(0==y&&B&&B(i,E,n),e.set(s.subarray(i,i+r*n)),o(i-o(0)),0!=y)throw new Error("Malformed buffer data: "+y)}var B={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:n,supported:!0,decodeVertexBuffer:function(t,e,r,n,o){A(a.exports.meshopt_decodeVertexBuffer,t,e,r,n,a.exports[B[o]])},decodeIndexBuffer:function(t,e,r,n){A(a.exports.meshopt_decodeIndexBuffer,t,e,r,n)},decodeIndexSequence:function(t,e,r,n){A(a.exports.meshopt_decodeIndexSequence,t,e,r,n)},decodeGltfBuffer:function(t,e,r,n,E,i){A(a.exports[o[E]],t,e,r,n,a.exports[B[i]])}}}(),Et={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(t){return t===Et.SCENE3D?1:t===Et.MORPHING?void 0:0}},it=Object.freeze(Et);const Ct=function(){let t=!0;return function(e,r){const a=t?function(){if(r){const t=r.apply(e,arguments);return r=null,t}}:function(){};return t=!1,a}}(),st=Ct(void 0,(function(){return st.toString().search("(((.+)+)+)+$").toString().constructor(st).search("(((.+)+)+)+$")}));st();var yt,lt,ut=Object.freeze({PF_RGB8:32849,PF_RGBA8:32856,PF_RGB32F:34837,PF_RGBA32F:34836}),Pt=1,ft=2,ct={};ct[0]=D.PixelFormat.RGB_DXT1,ct[Pt]=D.PixelFormat.RGBA_DXT3,ct[ft]=D.PixelFormat.RGBA_DXT5;var dt,pt=0,Tt=!1;function Dt(t,e){var r=t.data,n=r.byteLength,A=new Uint8Array(r),B=dt._malloc(n);!function(t,e,r,a){var n,A=r/4,B=a%4,o=new Uint32Array(t.buffer,0,(a-B)/4),E=new Uint32Array(e.buffer);for(n=0;n<o.length;n++)E[A+n]=o[n];for(n=a-B;n<a;n++)e[r+n]=t[n]}(A,dt.HEAPU8,B,n);var o=dt._crn_get_dxt_format(B,n),E=ct[o];if(!a.e(E))throw new u.t("Unsupported compressed format.");var i,C=dt._crn_get_levels(B,n),s=dt._crn_get_width(B,n),y=dt._crn_get_height(B,n),l=0;for(i=0;i<C;++i)l+=D.PixelFormat.compressedTextureSizeInBytes(E,s>>i,y>>i);if(pt<l&&(a.e(yt)&&dt._free(yt),yt=dt._malloc(l),lt=new Uint8Array(dt.HEAPU8.buffer,yt,l),pt=l),dt._crn_decompress(B,n,yt,l,0,C),dt._free(B),a.u(t.bMipMap,!1)){var P=lt.slice(0,l);return e.push(P.buffer),new T.e(E,s,y,P)}var f=D.PixelFormat.compressedTextureSizeInBytes(E,s,y),c=lt.subarray(0,f),d=new Uint8Array(f);return d.set(c,0),e.push(d.buffer),new T.e(E,s,y,d)}var Lt,Ft=1,gt=0,It=1,Mt=2,vt=3,mt=0,_t=1,St=2;new E.e;var Ot,Nt=!1,Rt=null;const ht=33776,Gt=33779,bt=38e3,xt=38001,Ut=38002,Kt=5e4;function Ht(t){let e=c.S3MPixelFormat.NONE;switch(t){case ht:case Gt:e=c.S3MPixelFormat.BGRA;break;case bt:e=c.S3MPixelFormat.WEBP;break;case xt:e=c.S3MPixelFormat.STANDARD_CRN;break;case Ut:e=c.S3MPixelFormat.KTX2;break;case Kt:e=c.S3MPixelFormat.CRN_DXT5;break;default:e=c.S3MPixelFormat.NONE}return e}function wt(t){let e=c.S3MPixelFormat.BGR;switch(t){case ut.PF_RGB8:e=c.S3MPixelFormat.BGR;break;case ut.PF_RGBA8:e=c.S3MPixelFormat.ABGR;break;case ut.PF_RGB32F:e=c.S3MPixelFormat.WEBP_RGB;break;case ut.PF_RGBA32F:e=c.S3MPixelFormat.WEBP;break;default:e=t}return e}function Vt(t,e,r,a,n,A){this.left=t,this.bottom=e,this.right=r,this.top=a,this.minHeight=n,this.maxHeight=A,this.width=r-t,this.length=a-e,this.height=A-n}function Yt(t,e,r){var a=r,n=t.getUint32(a,!0),A=a+=Uint32Array.BYTES_PER_ELEMENT,B=new Uint8Array(e,a,n);return{dataViewByteOffset:A,byteOffset:a+=n*Uint8Array.BYTES_PER_ELEMENT,buffer:B}}function Jt(t,e,r,a){var n=t.getUint32(a+e,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var A=r.subarray(a,a+n);return{string:C.a(A),bytesOffset:a+=n}}function kt(t,e,r,a,n,A){var B=r,o=t.getUint16(r+a,!0);B+=Uint16Array.BYTES_PER_ELEMENT,A||(B+=Uint16Array.BYTES_PER_ELEMENT);for(var E=0;E<o;E++){var C=t.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var s=t.getUint16(B+a,!0);if(B+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(B+a,!0),B+=Uint16Array.BYTES_PER_ELEMENT,20==s||35==s);else{var y=C*s*Float32Array.BYTES_PER_ELEMENT,l=e.subarray(B,B+y);B+=y;var u="aTexCoord"+E,P=n.vertexAttributes,f=n.attrLocation;f[u]=P.length,P.push({index:f[u],typedArray:l,componentsPerAttribute:s,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:s*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return{bytesOffset:B}}function Wt(t,e,r,a,n,A){var B=r,o=t.getUint16(B+a,!0);B+=Uint16Array.BYTES_PER_ELEMENT,B+=Uint16Array.BYTES_PER_ELEMENT;for(var E=n.vertexAttributes,C=n.attrLocation,s=0;s<o;s++){var y=t.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(B+a,!0);if(B+=Uint16Array.BYTES_PER_ELEMENT,16===l){B-=Uint16Array.BYTES_PER_ELEMENT;var u=3===A?Uint16Array.BYTES_PER_ELEMENT:Uint32Array.BYTES_PER_ELEMENT,P=y*(l*Float32Array.BYTES_PER_ELEMENT+u),f=e.subarray(B,B+P);B+=P;var c=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*l*y);n.instanceCount=y,n.instanceMode=l,n.instanceBuffer=c,n.instanceIndex=1;for(var d=Float32Array.BYTES_PER_ELEMENT*l+u,p=0;p<y;p++){var T=p*d+u,D=f.subarray(T,T+d);c.set(D,p*(d-u))}L=16*Float32Array.BYTES_PER_ELEMENT,C.uv2=E.length,E.push({index:C.uv2,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),C.uv3=E.length,E.push({index:C.uv3,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv4=E.length,E.push({index:C.uv4,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.secondary_colour=E.length,E.push({index:C.secondary_colour,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})}else{t.getUint16(B+a,!0),B+=Uint16Array.BYTES_PER_ELEMENT;P=y*l*Float32Array.BYTES_PER_ELEMENT;if(17===l||29===l){var L;c=e.subarray(B,B+P);n.instanceCount=y,n.instanceMode=l,n.instanceBuffer=c,n.instanceIndex=1,17===l?(L=17*Float32Array.BYTES_PER_ELEMENT,C.uv2=E.length,E.push({index:C.uv2,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),C.uv3=E.length,E.push({index:C.uv3,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv4=E.length,E.push({index:C.uv4,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.secondary_colour=E.length,E.push({index:C.secondary_colour,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv6=E.length,E.push({index:C.uv6,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})):29===l&&(L=29*Float32Array.BYTES_PER_ELEMENT,C.uv1=E.length,E.push({index:C.uv1,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1,byteLength:P}),C.uv2=E.length,E.push({index:C.uv2,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv3=E.length,E.push({index:C.uv3,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv4=E.length,E.push({index:C.uv4,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv5=E.length,E.push({index:C.uv5,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv6=E.length,E.push({index:C.uv6,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv7=E.length,E.push({index:C.uv7,componentsPerAttribute:3,componentDatatype:i.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.secondary_colour=E.length,E.push({index:C.secondary_colour,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),C.uv9=E.length,E.push({index:C.uv9,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}))}else{var F=y*l;n.instanceBounds=new Float32Array(F);for(var g=0;g<F;g++)n.instanceBounds[g]=t.getFloat32(B+a+g*Float32Array.BYTES_PER_ELEMENT,!0)}B+=P}}return{bytesOffset:B}}var Zt=new B.t(40680631590769,40680631590769,40408299984661.445),Xt=new B.t,Qt=new B.t;function zt(t,e,r,n){var A=Math.cos(e);Xt.x=A*Math.cos(t),Xt.y=A*Math.sin(t),Xt.z=Math.sin(e),Xt=B.t.normalize(Xt,Xt),B.t.multiplyComponents(Zt,Xt,Qt);var o=Math.sqrt(B.t.dot(Xt,Qt));return Qt=B.t.divideByScalar(Qt,o,Qt),Xt=B.t.multiplyByScalar(Xt,r,Xt),a.e(n)||(n=new B.t),B.t.add(Qt,Xt,n)}var jt=new B.t,qt=new B.t$1,$t=new n.y,te=new n.y;function ee(t,e,r,A,E,C,s,y,l){var u=A,f=e.getUint32(u+r,!0);if(E.verticesCount=f,u+=Uint32Array.BYTES_PER_ELEMENT,f<=0)return{bytesOffset:u};var c=e.getUint16(u+r,!0);u+=Uint16Array.BYTES_PER_ELEMENT;var d=e.getUint16(u+r,!0);d=c*Float32Array.BYTES_PER_ELEMENT,u+=Uint16Array.BYTES_PER_ELEMENT;var p=f*c*Float32Array.BYTES_PER_ELEMENT,T=t.subarray(u,u+p);u+=p;var D=E.vertexAttributes,L=E.attrLocation,F=void 0,g=void 0;if(s){F=new B.t$1,g=new B.t$1;var I=new Float32Array(2*f),M=new Float64Array(2*f);if(a.e(y)){var v=new Float32Array(T.byteLength/4),m=new Float32Array(T.buffer,T.byteOffset,T.byteLength/4);k=3===c?B.t.unpackArray(m):o.e.unpackArray(m);var _=n.y.multiply(y.sphereMatrix,y.geoMatrix,$t),S=n.y.multiply(y.ellipsoidMatrix,y.geoMatrix,te);n.y.inverse(S,S);for(var O=new P.t(6378137,6378137,6378137),N=0,R=0,h=k.length;R<h;R++){var G=k[R];n.y.multiplyByPoint(_,G,jt);var b=zt((W=O.cartesianToCartographic(jt,qt)).longitude,W.latitude,W.height,jt);n.y.multiplyByPoint(S,b,G),3===c?(B.t.pack(G,v,N),N+=3):(o.e.pack(G,v,N),N+=4),M[2*R]=W.longitude,M[2*R+1]=W.latitude,0===R?(F.longitude=W.longitude,F.latitude=W.latitude,g.longitude=W.longitude,g.latitude=W.latitude):(F.longitude=Math.max(W.longitude,F.longitude),F.latitude=Math.max(W.latitude,F.latitude),g.longitude=Math.min(W.longitude,g.longitude),g.latitude=Math.min(W.latitude,g.latitude))}T=v}else{var x=new B.t,U=new B.t,K=new Float32Array(T.buffer,T.byteOffset,T.byteLength/4),H=new B.t$1;O=be?new P.t(6378137,6378137,6356752.314245179):new P.t(6378137,6378137,6378137);for(var w=0;w<f;w++)n.y.multiplyByPoint(C,B.t.fromElements(K[c*w],K[c*w+1],K[c*w+2],x),U),H=O.cartesianToCartographic(U,qt),M[2*w]=H.longitude,M[2*w+1]=H.latitude,0===w?(F.longitude=H.longitude,F.latitude=H.latitude,g.longitude=H.longitude,g.latitude=H.latitude):(F.longitude=Math.max(H.longitude,F.longitude),F.latitude=Math.max(H.latitude,F.latitude),g.longitude=Math.min(H.longitude,g.longitude),g.latitude=Math.min(H.latitude,g.latitude))}for(w=0;w<f;w++)I[2*w]=M[2*w]-g.longitude,I[2*w+1]=M[2*w+1]-g.latitude;L.aPosition=D.length,D.push({index:L.aPosition,typedArray:T,componentsPerAttribute:c,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:d,normalize:!1}),L.img=D.length,D.push({index:L.img,typedArray:I,componentsPerAttribute:2,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}else{if(3===c&&a.e(C)){U=new B.t,K=new Float32Array(T.buffer,T.byteOffset,T.byteLength/4);for(var V=new Float32Array(T.byteLength/4+f),Y=K.length,J=(w=0,0);w<Y;w+=3,J+=4)V[J]=K[w],V[J+1]=K[w+1],V[J+2]=K[w+2],n.y.multiplyByPoint(C,B.t.fromElements(V[J],V[J+1],V[J+2],x),U),V[J+3]=B.t$1.fromCartesian(U).height;T=V,d=(c=4)*Float32Array.BYTES_PER_ELEMENT}if(a.e(y)){var k;v=new Float32Array(T.byteLength/4),m=new Float32Array(T.buffer,T.byteOffset,T.byteLength/4);k=3===c?B.t.unpackArray(m):o.e.unpackArray(m);_=n.y.multiply(y.sphereMatrix,y.geoMatrix,$t),S=n.y.multiply(y.ellipsoidMatrix,y.geoMatrix,te);n.y.inverse(S,S);for(O=new P.t(6378137,6378137,6378137),N=0,R=0,h=k.length;R<h;R++){G=k[R];n.y.multiplyByPoint(_,G,jt);var W;b=zt((W=O.cartesianToCartographic(jt,qt)).longitude,W.latitude,W.height,jt);n.y.multiplyByPoint(S,b,G),3===c?(B.t.pack(G,v,N),N+=3):(o.e.pack(G,v,N),N+=4)}T=v}L.aPosition=D.length,D.push({index:L.aPosition,typedArray:T,componentsPerAttribute:c,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:d,normalize:!1})}return{bytesOffset:u,cartographicBounds:{max:F,min:g}}}function re(t,e,r,a,n,A){var B=a,o=e.getUint32(B+r,!0);if(B+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:B};var E=e.getUint16(B+r,!0);B+=Uint16Array.BYTES_PER_ELEMENT;var C=e.getUint16(B+r,!0);B+=Uint16Array.BYTES_PER_ELEMENT;var s=o*E*Float32Array.BYTES_PER_ELEMENT,y=t.subarray(B,B+s);let l=new Float32Array(y.buffer,y.byteOffset,3);B+=s;let u=A!==Z.Text&&0===l[0]&&0===l[1]&&0===l[2];if(!n.ignoreNormal&&!u){var P=n.vertexAttributes,f=n.attrLocation;f.aNormal=P.length,P.push({index:f.aNormal,typedArray:y,componentsPerAttribute:E,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:C,normalize:!1})}return{bytesOffset:B}}var ae={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT,3:Uint16Array.BYTES_PER_ELEMENT,4:Uint8Array.BYTES_PER_ELEMENT};const ne={0:i.ComponentDatatype.UNSIGNED_INT,1:i.ComponentDatatype.FLOAT,2:i.ComponentDatatype.DOUBLE,3:i.ComponentDatatype.SHORT,4:i.ComponentDatatype.UNSIGNED_BYTE};function Ae(t,e,r,a,n){var A,B=a,o=e.getUint32(B+r,!0);if(B+=Uint32Array.BYTES_PER_ELEMENT,n.verticesCount,o>0){e.getUint16(B+r,!0),B+=Uint16Array.BYTES_PER_ELEMENT,B+=2*Uint8Array.BYTES_PER_ELEMENT;var E=o*Uint8Array.BYTES_PER_ELEMENT*4;A=v(t,B,B+E),B+=E;var C=n.vertexAttributes,s=n.attrLocation;s.aColor=C.length,C.push({index:s.aColor,typedArray:A,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!0})}return{bytesOffset:B}}function Be(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);return A+=Uint32Array.BYTES_PER_ELEMENT,B<=0?{bytesOffset:A}:(e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,A+=2*Uint8Array.BYTES_PER_ELEMENT,{bytesOffset:A+=B*Uint8Array.BYTES_PER_ELEMENT*4})}function oe(t,e,r,a,n){var A=n,B=[],o=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var E=0;E<o;E++){var i={};t>=3&&(r.getUint32(A+a,!0),A+=Uint32Array.BYTES_PER_ELEMENT);var C=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var s=r.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,r.getUint8(A+a,!0),A+=Uint8Array.BYTES_PER_ELEMENT;var y=r.getUint8(A+a,!0);if(A+=Uint8Array.BYTES_PER_ELEMENT,A+=Uint8Array.BYTES_PER_ELEMENT,C>0){var l=0,u=null;1===s||3===s?(l=C*Uint32Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+l)):(l=C*Uint16Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+l),C%2!=0&&(l+=2)),i.indicesTypedArray=u,A+=l}i.indicesCount=C,i.indexType=s,i.primitiveType=y;var P=[],f=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var c=0;c<f;c++){var d=Jt(r,a,e,A),p=d.string;A=d.bytesOffset,P.push(p),i.materialCode=p}if(0===f&&(i.materialCode="OSGBEmpty"),B.push(i),0!==A%4)A+=4-A%4}return{bytesOffset:A,arrIndexPackage:B}}function Ee(t){let{version:e,typedArray:r,view:A,viewByteOffset:E,bufferByteOffset:C,vertexPackage:s,isOldVersion:l,scratchMat:u,bCoverImageryLayer:f,transformPar:c,fileType:d}=t,p=u;var T,D,L=C,F=A.getUint32(L+E,!0);return s.nCompressOptions=F,L+=Uint32Array.BYTES_PER_ELEMENT,(F&y.VertexCompressOption.SVC_Vertex)==y.VertexCompressOption.SVC_Vertex?(T=function(t,e,r,A,E,C,s){var y=A,l=e.getUint32(y+r,!0);if(E.verticesCount=l,y+=Uint32Array.BYTES_PER_ELEMENT,l<=0)return{bytesOffset:y};var u=e.getUint16(y+r,!0);y+=Uint16Array.BYTES_PER_ELEMENT;var f=e.getUint16(y+r,!0);f=u*Int16Array.BYTES_PER_ELEMENT,y+=Uint16Array.BYTES_PER_ELEMENT;var c=e.getFloat32(y+r,!0);y+=Float32Array.BYTES_PER_ELEMENT;var d=new o.e;d.x=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,d.y=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,d.z=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,d.w=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,E.vertCompressConstant=c,E.minVerticesValue=d;var p=l*u*Int16Array.BYTES_PER_ELEMENT,T=t.subarray(y,y+p);if(y+=p,a.e(C)){var D=new Uint16Array(T.byteLength/2),L=new Uint16Array(T.buffer,T.byteOffset,T.byteLength/2),F=o.e.unpackArray(L);for(let t=0,e=F.length;t<e;t++){let e=F[t];B.t.multiplyByScalar(e,c,e),B.t.add(e,d,e)}var g=n.y.multiply(C.sphereMatrix,C.geoMatrix,$t),I=n.y.multiply(C.ellipsoidMatrix,C.geoMatrix,te);n.y.inverse(I,I);var M=new P.t(6378137,6378137,6378137),v=0;for(let t=0,e=F.length;t<e;t++){let e=F[t];n.y.multiplyByPoint(g,e,jt);let r=M.cartesianToCartographic(jt,qt),a=zt(r.longitude,r.latitude,r.height,jt);n.y.multiplyByPoint(I,a,e),B.t.subtract(e,d,e),B.t.divideByScalar(e,c,e),o.e.pack(e,D,v),v+=4}T=D}var m=E.vertexAttributes,_=E.attrLocation;return _.aPosition=m.length,m.push({index:_.aPosition,typedArray:T,componentsPerAttribute:u,componentDatatype:i.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:f,normalize:!1}),{bytesOffset:y}}(r,A,E,L,s,c),L=T.bytesOffset):(L=(T=ee(r,A,E,L,s,p,f,c)).bytesOffset,D=T.cartographicBounds),(F&y.VertexCompressOption.SVC_Normal)==y.VertexCompressOption.SVC_Normal?(T=function(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,B<=0)return{bytesOffset:A};e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var o=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var E=2*B*Int16Array.BYTES_PER_ELEMENT,C=t.subarray(A,A+E);if(A+=E,!n.ignoreNormal){var s=n.vertexAttributes,y=n.attrLocation;y.aNormal=s.length,s.push({index:y.aNormal,typedArray:C,componentsPerAttribute:2,componentDatatype:i.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:o,normalize:!1})}return{bytesOffset:A}}(r,A,E,L,s),L=T.bytesOffset):L=(T=re(r,A,E,L,s,d)).bytesOffset,L=(T=Be(0,A,E,L=(T=Ae(r,A,E,L,s)).bytesOffset)).bytesOffset,(F&y.VertexCompressOption.SVC_TexutreCoord)==y.VertexCompressOption.SVC_TexutreCoord?(T=function(t,e,r,a,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var A=r,B=t.getUint16(r+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var E=0,C=0;C<B;C++){var s=t.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,A+=3*Uint8Array.BYTES_PER_ELEMENT;var y=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var u=t.getFloat32(A+a,!0);A+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(u);var P=new o.e;P.x=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.y=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.z=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.w=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(P);var f=y*l*Int16Array.BYTES_PER_ELEMENT,c=e.subarray(A,A+f),d=(A+=f)%4;0!==d&&(A+=4-d);var p="aTexCoord"+E,T=n.vertexAttributes,D=n.attrLocation;if(D[p]=T.length,T.push({index:D[p],typedArray:c,componentsPerAttribute:l,componentDatatype:i.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),s){f=y*Float32Array.BYTES_PER_ELEMENT;var L=e.subarray(A,A+f);A+=f,n.texCoordZMatrix=!0,D[p="aTexCoordZ"+E]=T.length,T.push({index:D[p],typedArray:L,componentsPerAttribute:1,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}E++}return{bytesOffset:A}}(A,r,L,E,s),L=T.bytesOffset):L=(T=kt(A,r,L,E,s,l)).bytesOffset,(F&y.VertexCompressOption.SVC_TexutreCoordIsW)==y.VertexCompressOption.SVC_TexutreCoordIsW&&(s.textureCoordIsW=!0),{bytesOffset:L=(T=Wt(A,r,L,E,s,e)).bytesOffset,cartographicBounds:D}}function ie(t,e,r,a,n,A,B,o,E,i,C){t>=3&&(r.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT);var s,y=n;y=(s=ee(e,r,a,y,A,o,E,i)).bytesOffset;var l=s.cartographicBounds;if(y=(s=Ae(e,r,a,y=(s=re(e,r,a,y,A,C)).bytesOffset,A)).bytesOffset,t<3&&(y=(s=Be(0,r,a,y)).bytesOffset),y=(s=Wt(r,e,y=(s=kt(r,e,y,a,A,B)).bytesOffset,a,A,t)).bytesOffset,t>=3&&(s=function(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var o=0;o<B;o++){var E=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var i=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var C=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var s=E*i*ae[C],y=t.subarray(A,A+s);A+=s;let a=ne[C];n.customAttributesArr.push({typedArray:y,componentsPerAttribute:i,componentDatatype:a,offsetInBytes:0,strideInBytes:0,normalize:!1})}return{bytesOffset:A}}(e,r,a,y,A),y=s.bytesOffset),t>=3){var u=Jt(r,a,e,y);y=u.bytesOffset,A.customVertexAttribute=""===u.string?{}:JSON.parse(u.string),De(A);var P=(y+a)%4;P&&(P=4-P),y+=P}return t>=3&&(s=function(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,B<=0)return{bytesOffset:A};var o=e.getUint16(A+r,!0);return A+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,{bytesOffset:A+=B*o*Float32Array.BYTES_PER_ELEMENT}}(0,r,a,y),y=s.bytesOffset),{bytesOffset:y,cartographicBounds:l}}function Ce(t){return 0!==t.length&&"ClampGroundAndObjectLinePass"===t[0].materialCode}var se=1,ye=4,le=8,ue=16,Pe=32,fe=64,ce=128,de=512,pe=1024;const Te={VertexWeight:"aVertexWeight",PointCloudIntensity:"aIntensity",TextureCoordMatrix:"aTextureCoordMatrix",VertexWeight_1:"aVertexWeight_1"};function De(t){let e=t.customAttributesArr,r=t.customVertexAttribute;if(!a.e(r)||!a.e(e)||e.length<1)return;let n=t.vertexAttributes;for(let a in r){let A=Te[a];if(void 0===A)continue;let B=e[r[a]];B.index=n.length,n.push(B),t.attrLocation[A]=B.index}}function Le(t,e,r,E,C,s,l,u,P,f,c,d,p,T){var D=t,L=0,F=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,f=a.u(f,a.u.EMPTY_OBJECT);for(var g=void 0,I=0;I<F;I++){u>=3&&(e.getUint32(L+r,!0),L+=Uint32Array.BYTES_PER_ELEMENT);var M=(ht=Jt(e,r,D,L)).string;if(a.e(P)){var m=a.u(f[M],n.y.IDENTITY);g=new n.y,n.y.multiply(P,m,g)}a.e(p)&&(p.geoMatrix=a.u(f[M],n.y.IDENTITY));var _=(L=ht.bytesOffset)%4;0!==_&&(L+=4-_);var S=gt;if(S=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,(ne={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1}).ignoreNormal=E.ignoreNormal,ne.customAttributesArr=[],u>=3)switch(S){case mt:S=It;break;case _t:S=vt;break;case St:S=Mt}if(S===vt){u>=3&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT),u>=2&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var O,R={};R.posUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,R.normalUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,R.colorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,u<=3&&(R.secondColorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT),u>=3?(O=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT):(O=e.getUint16(L+r,!0),L+=Int16Array.BYTES_PER_ELEMENT);for(var h=[],G=0;G<O;G++){var b=e.getInt32(L+r,!0);h.push(b),L+=Int32Array.BYTES_PER_ELEMENT}R.texCoordUniqueIDs=h;var x=[];if(u>=3){var U=e.getUint32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var K=0;K<U;K++){var H=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,x.push(H)}}R.vertexAttrUniqueIDs=x;var w=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var V=[],Y={};if(w>0){var J=(k=Jt(e,r,D,L)).string;L=k.bytesOffset,Y.materialCode=J,V.push(Y)}u>=3&&((Ut=(L+r)%4)&&(Ut=4-Ut),L+=Ut);var k,W=new Object,Z=e.getUint32(L+r,!0),X=v(D,L+=Int32Array.BYTES_PER_ELEMENT,L+Z);if(w>0?N.dracoDecodeMesh(Lt,X,Z,ne,Y,R,g,c,W,p):N.dracoDecodePointCloud(Lt,X,Z,ne,R),a.e(W.min)&&a.e(W.max)||(W=void 0),L+=Z,u>=3)(Ut=(L+r)%4)&&(Ut=4-Ut),L=(k=Jt(e,r,D,L+=Ut)).bytesOffset,ne.customVertexAttribute=JSON.parse(k.string),De(ne),(Ut=(L+r)%4)&&(Ut=4-Ut),L+=Ut;E[M]={vertexPackage:ne,arrIndexPackage:V,cartographicBounds:W}}else if(S==Mt&&u>=3){var Q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var z=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,ne.minVerticesValue=new o.e,ne.minTexCoordValue=[new A.o,new A.o],ne.texCoordCompressConstant=[new B.t,new B.t];V=[];for(var j=0;j<z;j++){var q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,ne.vertCompressConstant=e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT,ne.minVerticesValue.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ne.minVerticesValue.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ne.minVerticesValue.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var $=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var tt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var et=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var rt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var at=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var nt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var At=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var Bt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT,ne.minTexCoordValue[0].x=et,ne.minTexCoordValue[0].y=rt,ne.minTexCoordValue[1].x=At,ne.minTexCoordValue[1].y=Bt,ne.texCoordCompressConstant[0].x=$,ne.texCoordCompressConstant[0].y=tt,ne.texCoordCompressConstant[1].x=at,ne.texCoordCompressConstant[1].y=nt;var Et=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;W=new Object;for(var it=0;it<Et;it++){var Ct=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var st=Ct,yt=0;st!=de&&st!=pe||(yt=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var lt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var ut=new Uint8Array(e.buffer,L+r,lt);(Ut=((L+=Uint8Array.BYTES_PER_ELEMENT*lt)+r)%4)&&(Ut=4-Ut),L+=Ut,ge(q,st,yt,ut,ne,Q,p,c,W,g,T)}L=(xt=Jt(e,r,D,L)).bytesOffset,ne.customVertexAttribute=JSON.parse(xt.string),De(ne),(Ut=(L+r)%4)&&(Ut=4-Ut),L+=Ut;var Pt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var ft=0;ft<Pt;ft++){Y={};var ct=e.getInt32(L+r,!0);if(L+=Int32Array.BYTES_PER_ELEMENT,ct>0){var dt=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var pt=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var Tt,Dt,Ft=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,13!==pt?(Tt=new Uint8Array(e.buffer,L+r,Ft),L+=Uint8Array.BYTES_PER_ELEMENT*Ft):(Tt=new Uint32Array(e.buffer,L+r,Ft),L+=Uint32Array.BYTES_PER_ELEMENT*Ft),(Ut=(L+r)%4)&&(Ut=4-Ut),L+=Ut,13!==pt?(Dt=i.ComponentDatatype.createTypedArray(i.ComponentDatatype.UNSIGNED_BYTE,ct*Uint32Array.BYTES_PER_ELEMENT),ot.decodeIndexBuffer(Dt,ct,Uint32Array.BYTES_PER_ELEMENT,Tt)):Dt=Tt;var Ot,Nt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,Y.indexType=dt,0===dt?Ot=new Uint16Array(ct):1===dt&&(Ot=new Uint32Array(ct)),Y.indicesCount=ct;var Rt=new Uint32Array(Dt.buffer,Dt.byteOffset,Dt.byteLength/4);Ot.set(Rt,0),Y.indicesTypedArray=Ot,Y.primitiveType=pt;for(it=0;it<Nt;it++){var ht;J=(ht=Jt(e,r,D,L)).string;L=ht.bytesOffset,Y.materialCode=J}if(V.length>0&&13!==pt){var Gt=ne.preVertexCount;Y.indicesTypedArray=Rt.map((function(t){return t+Gt})),Y.indexType=1}V.push(Y),(Ut=(L+r)%4)&&(Ut=4-Ut),L+=Ut}}}u>3&&(L=Wt(e,D,L,r,ne,u).bytesOffset),ne.nCompressOptions=Q,2===V.length&&13===V[1].primitiveType&&V[1].indicesCount>=3&&(bt=y._0x4ea17e.createEdgeDataByIndices(ne,V[1],s)),a.e(W.min)&&a.e(W.max)||(W=void 0),E[M]={vertexPackage:ne,arrIndexPackage:V,edgeGeometry:bt,cartographicBounds:W}}else{var bt;if(S===It||S===gt)L=(ht=ie(u,D,e,r,L,ne,C,g,c,p,d)).bytesOffset,W=ht.cartographicBounds;else if(S===Mt){var xt,Ut;if(L=(ht=Ee({version:u,typedArray:D,view:e,viewByteOffset:r,bufferByteOffset:L,vertexPackage:ne,isOldVersion:C,scratchMat:g,bCoverImageryLayer:c,transformPar:p,fileType:d})).bytesOffset,W=ht.cartographicBounds,u>=3)L=(xt=Jt(e,r,D,L)).bytesOffset,ne.customVertexAttribute=JSON.parse(xt.string),De(ne),(Ut=(L+r)%4)&&(Ut=4-Ut),L+=Ut}Ce(V=(ht=oe(u,D,e,r,L)).arrIndexPackage)&&(ne.clampRegionEdge=!0),2===V.length&&13===V[1].primitiveType&&V[1].indicesCount>=3&&(bt=y._0x4ea17e.createEdgeDataByIndices(ne,V[1],s)),L=ht.bytesOffset,a.e(W)&&a.e(W.min)&&a.e(W.max)||(W=void 0),E[M]={vertexPackage:ne,arrIndexPackage:V,edgeGeometry:bt,cartographicBounds:W}}if(u<3&&a.e(l)&&l){var Kt=e.getUint16(L+r,!0);if(L+=Uint16Array.BYTES_PER_ELEMENT,1===Kt){var Ht=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var wt,Vt=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT;var Yt=new Array(Ht),kt=new Array(Ht),Zt=new Array(Ht),Xt=new Array(Ht);for(wt=0;wt<Ht;wt++){var Qt=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,Yt[wt]=Qt;var zt=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,kt[wt]=zt;var jt=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,Zt[wt]=jt;for(var qt=jt*Vt,$t=new Array(qt),te=0;te<qt;te++){var ee=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,$t[te]=ee}Xt[wt]=$t}}var re=new B.t,ae=new B.t;re.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,re.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,re.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ae.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ae.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ae.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,E[M].min=re,E[M].max=ae;var ne=E[M].vertexPackage;a.e(ne.instanceBuffer)&&2===u&&(ne.instanceBounds=new Float32Array(6),B.t.pack(re,ne.instanceBounds,0),B.t.pack(ae,ne.instanceBounds,3))}if(u>=3){var Ae=new B.t;Ae.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Ae.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Ae.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var Be=new B.t;Be.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Be.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Be.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var se=new B.t;se.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,se.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,se.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var ye=new B.t;ye.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ye.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ye.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT}}}function Fe(t,e,r){var a=t.typedArray,n=new r(a.length+e.length);n.set(a,0),n.set(e,a.length),t.typedArray=n}function ge(t,e,r,A,o,E,C,y,l,u,f){var c,d=0,p=o.vertexAttributes,T=o.attrLocation;switch(e){case ye:case le:case ue:case Pe:d=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&E)||e!==ue&&e!==Pe||(d=2*Float32Array.BYTES_PER_ELEMENT),c=i.ComponentDatatype.createTypedArray(i.ComponentDatatype.UNSIGNED_BYTE,t*d);break;case fe:case ce:d=4*Uint8Array.BYTES_PER_ELEMENT,c=i.ComponentDatatype.createTypedArray(i.ComponentDatatype.UNSIGNED_BYTE,4*t);break;case de:case pe:d=Float32Array.BYTES_PER_ELEMENT*r,c=i.ComponentDatatype.createTypedArray(i.ComponentDatatype.UNSIGNED_BYTE,t*r*4);break;default:d=4*Uint16Array.BYTES_PER_ELEMENT,c=i.ComponentDatatype.createTypedArray(i.ComponentDatatype.UNSIGNED_BYTE,t*d)}switch(ot.decodeVertexBuffer(c,t,d,A,A.length),e){case se:var D=new Uint16Array(c.buffer,0,c.length/2),L=i.ComponentDatatype.SHORT;if(void 0!==(R=T.aPosition)?(Fe(p[R],D,Uint16Array),o.preVertexCount=o.verticesCount,o.verticesCount+=t):(T.aPosition=p.length,p.push({index:T.aPosition,typedArray:D,componentsPerAttribute:4,componentDatatype:L,offsetInBytes:0,strideInBytes:0,normalize:!1}),o.verticesCount=t),!a.e(C)&&y){var F,g=new B.t$1,I=new B.t$1,M=new Float32Array(2*t),v=new Float64Array(2*t),m=new B.t,_=new B.t,S=new B.t$1;F=be?new P.t(6378137,6378137,6356752.314245179):new P.t(6378137,6378137,6378137);for(var O=0;O<t;O++){if(n.y.multiplyByPoint(u,B.t.fromElements(D[4*O]*o.vertCompressConstant+o.minVerticesValue.x,D[4*O+1]*o.vertCompressConstant+o.minVerticesValue.y,D[4*O+2]*o.vertCompressConstant+o.minVerticesValue.z,m),_),f!==it.SCENE3D){var N=B.t.fromElements(_.y,_.z,_.x);S=(new s.n).unproject(N)}else S=F.cartesianToCartographic(_,qt);v[2*O]=S.longitude,v[2*O+1]=S.latitude,0===O?(g.longitude=S.longitude,g.latitude=S.latitude,I.longitude=S.longitude,I.latitude=S.latitude):(g.longitude=Math.max(S.longitude,g.longitude),g.latitude=Math.max(S.latitude,g.latitude),I.longitude=Math.min(S.longitude,I.longitude),I.latitude=Math.min(S.latitude,I.latitude))}for(O=0;O<t;O++)M[2*O]=v[2*O]-I.longitude,M[2*O+1]=v[2*O+1]-I.latitude;T.img=p.length,p.push({index:T.img,typedArray:M,componentsPerAttribute:2,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),l.max=g,l.min=I}break;case ye:var R=T.aNormal,h=new Int16Array(c.buffer,0,c.length/2);void 0!==R?Fe(p[R],h,Uint16Array):(T.aNormal=p.length,p.push({index:T.aNormal,typedArray:h,componentsPerAttribute:2,componentDatatype:i.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case ue:var G=new Uint16Array(c.buffer,0,c.length/2),b=(R=T.aTexCoord0,L=i.ComponentDatatype.SHORT,Uint16Array);0==(16&E)&&(L=i.ComponentDatatype.FLOAT,b=Float32Array,G=new Float32Array(c.buffer,0,c.length/4)),void 0!==R?Fe(p[R],G,b):(T.aTexCoord0=p.length,p.push({index:T.aTexCoord0,typedArray:G,componentsPerAttribute:2,componentDatatype:L,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Pe:G=new Uint16Array(c.buffer,0,c.length/2),R=T.aTexCoord1,L=i.ComponentDatatype.SHORT,b=Uint16Array;0==(16&E)&&(L=i.ComponentDatatype.FLOAT,b=Float32Array,G=new Float32Array(c.buffer,0,c.length/4)),void 0!==R?Fe(p[R],G,b):(T.aTexCoord1=p.length,p.push({index:T.aTexCoord1,typedArray:G,componentsPerAttribute:2,componentDatatype:L,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case fe:void 0!==(R=T.aColor)?Fe(p[R],c,Uint8Array):(T.aColor=p.length,p.push({index:T.aColor,typedArray:c,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:0,normalize:!0}));break;case ce:void 0!==(R=T.aSecondColor)?Fe(p[R],c,Uint8Array):(T.aSecondColor=p.length,p.push({index:T.aSecondColor,typedArray:c,componentsPerAttribute:4,componentDatatype:i.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case de:G=new Float32Array(c.buffer,0,c.length/4);void 0!==(R=T.aVertexWeight)?Fe(p[R],G,Float32Array):(T.aVertexWeight=p.length,p.push({index:T.aVertexWeight,typedArray:G,componentsPerAttribute:r,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case pe:var x=new Float32Array(c.buffer,0,c.length/4);void 0!==(R=T.aTextureCoordMatrix)?Fe(p[R],x,Float32Array):(T.aTextureCoordMatrix=p.length,p.push({index:T.aTextureCoordMatrix,typedArray:x,componentsPerAttribute:r,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}))}}function Ie(t,e,r,A,B){var o={},E=[],i=new n.y,C=t;B=a.u(B,{});for(var s=0;s<16;s++)i[s]=e.getFloat64(r+A,!0),r+=Float64Array.BYTES_PER_ELEMENT;o.matrix=i,o.skeletonNames=E;var y=e.getUint32(r+A,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var l=0;l<y;l++){var u=Jt(e,A,C,r),P=u.string;r=u.bytesOffset,E.push(P),B[P]=i}return{byteOffset:r,geode:o}}function Me(t){var e=t.indexOf("Geometry");if(-1===e)return t;var r=t.substring(e,t.length);return t.replace(r,"")}function ve(t,e,r,A,o,E,i,C){var y={},l=r.getFloat32(A+o,!0);A+=Float32Array.BYTES_PER_ELEMENT;var u=r.getUint16(A+o,!0);A+=Uint16Array.BYTES_PER_ELEMENT,y.rangeMode=u,y.rangeList=l;var f=new B.t;f.x=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,f.y=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,f.z=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT;var c=r.getFloat64(A+o,!0);if(A+=Float64Array.BYTES_PER_ELEMENT,a.e(i)){var d=n.y.clone(i.sphereMatrix,$t),p=n.y.clone(i.ellipsoidMatrix,te);n.y.inverse(p,p);var T=new P.t(6378137,6378137,6378137);n.y.multiplyByPoint(d,f,jt);let t=T.cartesianToCartographic(jt,qt),e=zt(t.longitude,t.latitude,t.height,jt);n.y.multiplyByPoint(p,e,f)}if(y.boundingSphere=new s.i(f,c),t>=3){var D=new B.t;D.x=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,D.y=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,D.z=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT;var L=new B.t;L.x=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,L.y=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,L.z=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT;var F=new B.t;F.x=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,F.y=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,F.z=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT;var g=new B.t;g.x=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,g.y=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,g.z=r.getFloat64(A+o,!0),A+=Float64Array.BYTES_PER_ELEMENT,y._obb={xExtent:L,yExtent:F,zExtent:g,obbCenter:D}}var I=e,M=(_=Jt(r,o,I,A)).string;A=_.bytesOffset,M=Me(M=(M=M.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")).replace(/\\/gi,"/")),y.childTile=M,y.geodes=[];var v=r.getUint32(A+o,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var m=0;m<v;m++){var _;A=(_=Ie(e,r,A,o,E)).byteOffset,y.geodes.push(_.geode)}return t>=3&&(A=(_=Jt(r,o,I,A)).bytesOffset),{pageLOD:y,bytesOffset:A}}function me(t,e,r,a,n,A,B){var o=0,E={},i=[],C=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var s=0;s<C;s++){var y=ve(t,e,r,o,a,n,A);o=y.bytesOffset,i.push(y.pageLOD)}return E.pageLods=i,E}function _e(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n["aTextureBatchId"+r]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0})}function Se(t,e,r,n){for(var A=r.length,B=0;B<A;B++)for(var o=r[B],E=o.subName.split("_")[0],i=o.subVertexOffsetArr,C=0;C<i.length;C++){var s=i[C],y=s.geoName,l=s.offset,u=s.count,P=s.texUnitIndex,f=e[y].vertexPackage.verticesCount,c=n[y];a.e(c)||(c=n[y]={});var d=c[P];a.e(d)||(d=c[P]=new Float32Array(f),p.d(d,-1));var T=a.e(t)?t[E]:B;p.d(d,T,l,l+u)}}function Oe(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n[1===r?"instanceId":"batchId"]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:i.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}function Ne(t,e,r,n,A){var B=0,o=t,E=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<E;i++){var C=Jt(e,r,o,B),s=C.string;B=C.bytesOffset;var l=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var u={};n[s].pickInfo=u;var P=n[s].edgeGeometry;if(-1==n[s].vertexPackage.instanceIndex){for(var f=new Float32Array(n[s].vertexPackage.verticesCount),c=0;c<l;c++){var d=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var T=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var D=0,L=0;u[d]={batchId:c};for(var F=0;F<T;F++)L=e.getUint32(B+r,!0),B+=Uint32Array.BYTES_PER_ELEMENT,D=e.getUint32(B+r,!0),B+=Uint32Array.BYTES_PER_ELEMENT,p.d(f,c,L,L+D);u[d].vertexColorOffset=L,u[d].vertexCount=D}Oe(n[s].vertexPackage,f,void 0)}else{var g=n[s].vertexPackage.instanceCount;n[s].vertexPackage.instanceBuffer,n[s].vertexPackage.instanceMode;var I=new Float32Array(g),M=0;for(c=0;c<l;c++){var v=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;T=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;for(F=0;F<T;F++){var m=e.getUint32(B+r,!0);if(B+=Uint32Array.BYTES_PER_ELEMENT,I[M]=M,void 0===u[v]&&(u[v]={vertexColorCount:1,instanceIds:[],vertexColorOffset:M}),u[v].instanceIds.push(m),M++,A>=3){D=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT}}}Oe(n[s].vertexPackage,I,1)}P=n[s].edgeGeometry;if(a.e(P)){var _,S,O=P.regular.instancesData,N=y._0x4ea17e.RegularInstanceStride;if(a.e(O))for(S=O.length,_=0;_<S;_+=N){var R=O[_+9];O[_+9]=f[R]}var h=P.silhouette.instancesData;if(N=y._0x4ea17e.SilhouetteInstanceStride,a.e(h))for(S=h.length,_=0;_<S;_+=N){R=h[_+12];h[_+12]=f[R]}}}}function Re(t){return t<1e-10&&t>-1e-10}function he(t,e,r,n,A,B,o,E){var i=new DataView(t),s=new Uint8Array(t),y=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var l=C.a(s,r,y);l=l.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,""),r+=y;var u=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var P=0;P<u;P++){var f={},p=i.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var T=i.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,f.rangeMode=T,f.rangeList=p;var D={};D.x=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,D.y=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,D.z=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var L=i.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,f.boundingSphere={center:D,radius:L},y=i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var F=C.a(s,r,y);r+=y,F=Me(F=F.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")),f.childTile=F}var g={},I=i.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;I>=3&&(i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var M=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var v=new Uint8Array(t,r,M),m=r+M,_=d.pako.inflate(v).buffer;E.push(_),i=new DataView(_);s=new Uint8Array(_);r=0;var S=i.getUint32(r,!0),O=Yt(i,_,r+=Uint32Array.BYTES_PER_ELEMENT),N=O.buffer;r=O.byteOffset;var R=me(I,N,i,O.dataViewByteOffset),h=r%4;0!==h&&(r+=4-h),Le((O=Yt(i,_,r)).buffer,i,O.dataViewByteOffset,g,!1,void 0,void 0,I),r=O.byteOffset,I<3&&((O=Yt(i,_,r)).buffer,r=O.byteOffset);var G={};!function(t,e,r,n,A,B,o,E,i,s){var y=E,l=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var u={},P=0;P<l;P++){var f=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var d=C.a(B,y-E,f),p=(y+=f)%4;0!==p&&(y+=4-p),o.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var T=o.getUint8(y,!0);y+=Uint8Array.BYTES_PER_ELEMENT;var D=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var L=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var F=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var g=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var I,M=o.getUint32(y,!0);if(y+=Uint32Array.BYTES_PER_ELEMENT,n&&T){var v=y-E;I=B.subarray(v,v+g),y+=g}var m=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var _=[],S=0;S<m;S++){f=o.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var O=C.a(B,y-E,f);y+=f,_.push(O),r[O]=d}var N=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var R=[];for(S=0;S<N;S++){f=o.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var h=C.a(B,y-E,f);y+=f,R.push(h)}var G=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var b=[],x=void 0,U=d;if(n)x=e[d]={};else{var K=r[d];for(U=K;a.e(K)&&K!==d;)U=K,K=r[K];a.e(U)&&(x=e[U])}var H=0;for(S=0;S<G;S++){f=o.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var w=C.a(B,y-E,f);if(y+=f,n){var V=w.split("_")[0];a.e(x[V])?H++:x[V]=S-H}var Y=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var J=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var k=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var W=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var Z=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var X=[],Q=0;Q<Z;Q++){f=o.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var z=C.a(B,y-E,f);y+=f;var j=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var q=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var $=o.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT,X.push({geoName:z,offset:j,count:q,texUnitIndex:$})}b.push({subName:w,offsetX:Y,offsetY:J,width:k,height:W,subVertexOffsetArr:X})}Se(x,t,b,u);var tt=!1;a.e(I)&&F===c.S3MPixelFormat.CRN_DXT5&&Tt&&(I=Dt({data:I},s).bufferView,tt=!0),i[d]={id:d,rootTextureName:U,width:D,height:L,compressType:F,size:g,format:M,textureData:I,subTexInfos:b,requestNames:R,isDXT:tt}}for(var z in u)if(u.hasOwnProperty(z)){var et=t[z].vertexPackage,rt=u[z];for(var $ in rt)rt.hasOwnProperty($)&&_e(et,rt[$],$)}}(g,n,A,B,0,(O=Yt(i,_,r)).buffer,i,O.dataViewByteOffset,G,E),r=O.byteOffset;var b=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var x=s.subarray(r,r+b),U=C.a(x);r+=b;var K=JSON.parse(U);(I>=3&&(S=i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),(S&Ft)==Ft)&&(Ne((O=Yt(i,_,r)).buffer,i,O.dataViewByteOffset,g,I),r=O.byteOffset);if(1==I){var H=R.pageLods,w=!0;for(P=0;P<H.length;P++){var V=H[P];w=""===V.childTile;for(var Y=V.geodes,J=0;J<Y.length;J++)for(var k=Y[J].skeletonNames,W=0;W<k.length;W++){var Z=k[W];if(w){var X=g[Z].vertexPackage;X.boundingSphere=z.calcBoundingSphereInWorker(1,X)}}}}o[l]={result:!0,groupNode:R,geoPackage:g,matrials:K,texturePackage:G,version:Bt.S3M4,dataVersion:I,rootBatchIdMap:n,ancestorMap:A},m<e&&he(t,e,m,n,A,!1,o,E)}const Ge=.4545454545;var be;function xe(e,r){var n=e.buffer;if(be=e.ellipsoid,e.isOSGB){if(a.e(Ot)||new Promise((function(e,r){t(["./OSGBToS3M-482da7dd"],e,r)})).then((function(t){(Ot=t.default).onRuntimeInitialized=function(){Nt=!0},Rt=Ot.cwrap("OSGBToS3MB","number",["number","number","number","number"])})),!Nt)return null;var A;switch(e.suffix){case"dae":case"DAE":A=4;break;case"x":case"X":A=2;break;default:A=0}n=function(t,e,r){var a=Ot._malloc(20*e),n=Ot._malloc(Uint8Array.BYTES_PER_ELEMENT*e);Ot.HEAPU8.set(t,n/Uint8Array.BYTES_PER_ELEMENT);var A=Rt(n,e,a,r),B=new Uint8Array(Ot.HEAPU8.buffer,a,A);return t=null,t=new Uint8Array(B).buffer,Ot._free(a),Ot._free(n),t}(new Uint8Array(n),n.byteLength,A)}var B=e.isS3MZ,o=e.fileType,E=e.supportCompressType,i=e.bVolume,s=e.isS3MBlock,l=e.modelMatrix,u=e.materialType,P=e.isCoverImageryLayer,f=e.transformPar,p=e.vertexColorLinear,T=null,D=null,L=null;if(i&&e.volbuffer.byteLength<8&&(i=!1),i){var F=e.volbuffer,g=new Uint8Array(F,8),I=d.pako.inflate(g).buffer,M=new Float64Array(I,0,1),v=new Uint32Array(I,48,1);if(0===M[0]||3200===v[0]||3201===v[0]){var m=0;0==M[0]&&(m=8),r.push(I);var _=new Float64Array(I,m,6),S=_[0],O=_[1],N=_[2],R=_[3],h=_[4]<_[5]?_[4]:_[5],G=_[4]>_[5]?_[4]:_[5];D={left:S,top:O,right:N,bottom:R,minHeight:h,maxHeight:G,width:(T=new Vt(S,R,N,O,h,G)).width,length:T.length,height:T.height};var b=new Uint32Array(I,48+m,7),x=b[0],U=b[1],K=b[2],H=b[3];L={nFormat:x,nSideBlockCount:U,nBlockLength:K,nLength:H,nWidth:b[4],nHeight:b[5],nDepth:b[6],imageArray:new Uint8Array(I,76+m,H*H*4)}}}var w=0,V={};V.ignoreNormal=e.ignoreNormal;var Y=e.rootBatchIdMap||{},J=e.ancestorMap||{},k={},W=new DataView(n),Z=W.getFloat32(w,!0);if(w+=Float32Array.BYTES_PER_ELEMENT,s)return W.getUint32(w,!0),w+=Uint32Array.BYTES_PER_ELEMENT,he(n,n.byteLength,w,Y,J,e.isRoot,k,r),k;var X=!1,Q=0;if(Z>=3&&(Q=W.getUint32(w,!0),w+=Uint32Array.BYTES_PER_ELEMENT),Z>=2&&(W.getUint32(w,!0),w+=Uint32Array.BYTES_PER_ELEMENT),Re(Z-1)||Re(Z-2)||Z>=3||Z>2.09&&Z<2.11){var j=W.getUint32(w,!0);w+=Uint32Array.BYTES_PER_ELEMENT;var q=new Uint8Array(n,w,j);Z>=3&&0===Q?n=q.buffer:(n=d.pako.inflate(q).buffer,w=0),r.push(n),W=new DataView(n)}else if(Z>1.199&&Z<1.201){j=W.getUint32(w,!0);w+=Uint32Array.BYTES_PER_ELEMENT,r.push(n)}else{X=!0,w=0;j=W.getInt32(w,!0);if(w+=Int32Array.BYTES_PER_ELEMENT,w+=Uint8Array.BYTES_PER_ELEMENT*j,B){W.getUint32(w,!0),w+=Uint32Array.BYTES_PER_ELEMENT;g=new Uint8Array(n,w);n=d.pako.inflate(g).buffer,r.push(n),W=new DataView(n),w=0}}var $=W.getUint32(w,!0),tt=Yt(W,n,w+=Uint32Array.BYTES_PER_ELEMENT),et=tt.buffer;w=tt.byteOffset;var rt={},at=me(Z,et,W,tt.dataViewByteOffset,rt,f),nt=w%4;0!==nt&&(w+=4-nt);var At=(tt=Yt(W,n,w)).buffer,ot=Z>2.09&&Z<3,Et=e.sceneMode;if(Le(At,W,tt.dataViewByteOffset,V,X,r,ot,Z,l,rt,P,e.fileType,f,Et),w=tt.byteOffset,ot)for(var it=0;it<at.pageLods.length;it++)for(var Ct=at.pageLods[it],st=Ct.geodes,yt=0;yt<st.length;yt++)for(var lt=st[yt].skeletonNames,ut=0;ut<lt.length;ut++){var Pt=lt[ut];a.e(V[Pt].max)&&(a.e(Ct.max)?(Ct.max.x=Math.max(V[Pt].max.x,Ct.max.x),Ct.max.y=Math.max(V[Pt].max.y,Ct.max.y),Ct.max.z=Math.max(V[Pt].max.z,Ct.max.z),Ct.min.x=Math.min(V[Pt].min.x,Ct.min.x),Ct.min.y=Math.min(V[Pt].min.y,Ct.min.y),Ct.min.z=Math.min(V[Pt].min.z,Ct.min.z)):(Ct.max=V[Pt].max,Ct.min=V[Pt].min))}Z<3&&((tt=Yt(W,n,w)).buffer,w=tt.byteOffset);var ft={};!function(t,e,r,a,n,A,B){var o=0,E=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<E;i++){var C=Jt(r,a,e,o),s=C.string,l=(o=C.bytesOffset)%4;0!==l&&(o+=4-l);var u=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var P=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var f=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var d=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var p=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var T=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT,B>3&&(d=Ht(d),T=wt(T));var D=e.subarray(o,o+p);o+=p;var L=null,F=d;d===y.S3MCompressType.enrS3TCDXTN&&1!=t?(y.L.decode(L,P,f,D,T),T>c.S3MPixelFormat.BGR||T===c.S3MPixelFormat.LUMINANCE_ALPHA?(L=new Uint8Array(P*f*4),D=new Uint8Array(e.buffer,D.byteOffset,P*f)):(L=new Uint16Array(P*f),D=new Uint16Array(e.buffer,D.byteOffset,p/2)),y.L.decode(L,P,f,D,T),A.push(L.buffer),d=0):L=D,n[s]={id:s,width:P,height:f,compressType:d,oriCompressType:F,nFormat:T,imageBuffer:L,mipmapLevel:u}}}(E,(tt=Yt(W,n,w)).buffer,W,tt.dataViewByteOffset,ft,r,Z),w=tt.byteOffset;var ct=W.getUint32(w,!0);w+=Uint32Array.BYTES_PER_ELEMENT;var dt=new Uint8Array(n).subarray(w,w+ct),pt=C.a(dt);w+=ct,pt=pt.replace(/\n\0/,"");var Tt=JSON.parse(pt);($&Ft)==Ft&&(Z>=3&&(W.getUint32(w,!0),w+=Uint32Array.BYTES_PER_ELEMENT),Ne((tt=Yt(W,n,w)).buffer,W,tt.dataViewByteOffset,V,Z));if(1==Z){var Dt=at.pageLods,Lt=!0;for(it=0;it<Dt.length;it++){var gt=Dt[it];Lt=""===gt.childTile;for(var It=gt.geodes,Mt=0;Mt<It.length;Mt++){lt=It[Mt].skeletonNames;for(var vt=0;vt<lt.length;vt++){var mt=lt[vt];if(Lt){var _t=V[mt].vertexPackage;_t.boundingSphere=z.calcBoundingSphereInWorker(o,_t)}}}}}return"BatchPBR"===u&&function(t,e,r,n,A){for(var B in delete t.ignoreNormal,t)if(t.hasOwnProperty(B)){var o=t[B],E=o.arrIndexPackage;if(E.length<1)continue;if(1===E.length||2===E.length&&13===E[1].primitiveType){var i=o.vertexPackage.attrLocation.aTextureCoordMatrix;if(void 0!==i){if((C=(b=o.vertexPackage.vertexAttributes[i]).typedArray)[0]<=0)continue}else if(void 0!==(i=o.vertexPackage.attrLocation.aTextureCoordMatrix||o.vertexPackage.attrLocation.aTexCoord0)){b=o.vertexPackage.vertexAttributes[i];var C=new Float32Array(b.typedArray.buffer,b.typedArray.byteOffset,b.typedArray.byteLength/4);if(3===b.componentsPerAttribute&&C[2]<=0)continue}}var s,l,u=0,P={},f=void 0;for(s=0,l=E.length;s<l;s++)13!==(U=E[s]).primitiveType?u+=0===U.indexType?U.indicesTypedArray.byteLength/2:U.indicesTypedArray.byteLength/4:f=E[s],0===s&&(P.indicesCount=0,P.indexType=E[s].indexType,P.primitiveType=E[s].primitiveType,P.materialCode=E[s].materialCode);P.indicesCount=u;var c=o.vertexPackage.verticesCount>65535?new Uint32Array(u):new Uint16Array(u),d=0;for(s=0,l=E.length;s<l;s++)if(13!==(U=E[s]).primitiveType){var p=0===U.indexType?Uint16Array:Uint32Array,T=0===U.indexType?U.indicesTypedArray.byteLength/2:U.indicesTypedArray.byteLength/4,D=new p(U.indicesTypedArray.buffer,U.indicesTypedArray.byteOffset,T);c.set(D,d),d+=D.length}P.indicesTypedArray=c,o.arrIndexPackage=[P],a.e(f)&&(o.arrIndexPackage.push(f),o.edgeGeometry=y._0x4ea17e.createEdgeDataByIndices(o.vertexPackage,f));var L=2*E.length*4,F=new Float32Array(L),g={},I=a.u(r.material,r.materials);for(s=0,l=I.length;s<l;s++){var M=I[s].material;g[S=a.u(M.id,M.name)]=M}for(s=0,l=E.length;s<l;s++)if((M=g[K=(U=E[s]).materialCode])&&(H=a.u(M.pbrMetallicRoughness,"PBR"===M.type?M:void 0))){F[8*s]=H.metallicFactor,F[8*s+1]=H.roughnessFactor,F[8*s+2]=M.alphaCutoff;var v=""===M.alphaMode?0:1,m="none"===M.cullMode?0:1;F[8*s+3]=m|v<<16,F[8*s+4]=H.emissiveFactor.x,F[8*s+5]=H.emissiveFactor.y,F[8*s+6]=H.emissiveFactor.z,F[8*s+7]=0,M.pbrIndex=s}var _="PBRMaterialParam_"+B;for(s=0,l=I.length;s<l;s++){M=I[s].material;var S=a.u(M.id,M.name),O=a.u(M.textureunitstates,M.textureStates);if(S===P.materialCode){O.push({textureunitstate:{addressmode:{u:0,v:0,w:0},filteringoption:0,filtermax:2,filtermin:2,id:_,texmodmatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],url:""}});break}}var N,R,h=o.vertexPackage,G=h.attrLocation.aTexCoord1;if(void 0!==G){var b=h.vertexAttributes[G];N=new Float32Array(2*h.verticesCount),b.typedArray=N}else N=new Float32Array(2*h.verticesCount),G=h.vertexAttributes.length,h.attrLocation.aTexCoord1=G,h.vertexAttributes.push({index:G,typedArray:N,componentsPerAttribute:2,componentDatatype:5126,offsetInBytes:0,strideInBytes:8,normalize:!1});A.push(N.buffer),void 0!==(G=h.attrLocation.aColor)&&(R=(b=h.vertexAttributes[G]).typedArray);var x={};for(s=0,l=E.length;s<l;s++){M=g[K=(U=E[s]).materialCode];var U,K,H=a.u(M.pbrMetallicRoughness,"PBR"===M.type?M:void 0);if(!M||!H)continue;var w=H.baseColor,V=void 0!==R,Y=M.pbrIndex;c=U.indicesTypedArray,c=0===U.indexType?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/2):new Uint32Array(c.buffer,c.byteOffset,c.byteLength/4);let t=w.x,e=w.y,r=w.z,A=w.w;n||(t=Math.pow(t,Ge),e=Math.pow(e,Ge),r=Math.pow(r,Ge));for(var J={},k=0,W=c.length;k<W;k++){var Z=c[k];N[2*Z]=Y,V&&void 0===J[Z]&&(J[Z]=!0,R[4*Z]*=t,R[4*Z+1]*=e,R[4*Z+2]*=r,R[4*Z+3]*=A)}x[K]=w}for(var S in x)(w=x[S]).x=w.y=w.z=w.w=1;e[_]={id:_,width:2*E.length,height:1,compressType:0,nFormat:25,imageBuffer:F,mipmapLevel:0}}}(V,ft,Tt,p,r),{result:!0,groupNode:at,geoPackage:V,matrials:Tt,texturePackage:ft,version:Bt.S3M4,dataVersion:Z,volImageBuffer:L,volBounds:D}}function Ue(){(a.e(dt)||"undefined"==typeof WebAssembly)&&a.e(Lt)&&(dt.onRuntimeInitialized=function(){Tt=!0},self.onmessage=e(xe),self.postMessage(!0))}return function(r){if("undefined"==typeof WebAssembly)return self.onmessage=e(xe),void self.postMessage(!0);var A=r.data.webAssemblyConfig;return a.e(A)?n.s.isInternetExplorer()?t([s.n$1("ThirdParty/Workers/ie-webworker-promise-polyfill.js")],(function(e){return self.Promise=e,-1!==A.modulePath.indexOf("crunch")?t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.Module),dt=t,Ue()):(dt=t,Ue())})):t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.DracoDecoderModule),t(A).then((function(t){Lt=t,Ue()}))):(Lt=t(),Ue())}))})):-1!==A.modulePath.indexOf("crunch")?t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.Module),dt=t,Ue()):(dt=t,Ue())})):t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.DracoDecoderModule),t(A).then((function(t){Lt=t,Ue()}))):(Lt=t(),Ue())})):void 0}}));
